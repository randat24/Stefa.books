# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 403 –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!**

–û—à–∏–±–∫–∞ 403 (Forbidden) –≤ API `/api/admin/users` –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

## üîß **–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –≤ API `/api/admin/users/route.ts`:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ email (admin@stefabooks.com.ua)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ä–æ–ª–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –≤ AuthContext:**
- –ü—Ä–æ—Ñ–∏–ª—å —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

## üìã **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–ü—Ä–æ–±–ª–µ–º–∞:**
```javascript
// ‚ùå –ë—ã–ª–æ - —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
if (!profile || profile.role !== 'admin') {
  return 403;
}

// ‚úÖ –°—Ç–∞–ª–æ - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ email –ò —Ä–æ–ª–∏
const isAdminByEmail = user.email === 'admin@stefabooks.com.ua';
const isAdminByRole = profile?.role === 'admin';
if (!isAdminByEmail && !isAdminByRole) {
  return 403;
}
```

### **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:**
```javascript
// ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
if (result.profile) {
  localStorage.setItem('user.profile', JSON.stringify(result.profile));
}
```

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

1. **–í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å:**
   - URL: `http://localhost:3001/admin/login`
   - Email: `admin@stefabooks.com.ua`
   - Password: `admin123456`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö:**
   - –ö–Ω–∏–≥–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è (85 –∫–Ω–∏–≥)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è
   - –û—à–∏–±–∫–∞ 403 –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å

## üìä **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ:
```
[INFO] Admin access check { 
  userId: 'aa8dc94e-999f-4e57-9ce4-2b019e0ddd45', 
  email: 'admin@stefabooks.com.ua', 
  profileRole: 'admin',
  isAdminByEmail: true,
  isAdminByRole: true
}
```

## ‚úÖ **–°—Ç–∞—Ç—É—Å:**

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ email —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ –ø—Ä–æ—Ñ–∏–ª—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 –≤–º–µ—Å—Ç–æ 403
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéâ **–ì–æ—Ç–æ–≤–æ!**

–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –±–µ–∑ –æ—à–∏–±–æ–∫ 403!
