-- ============================================================================
-- –§–ò–ù–ê–õ–¨–ù–ê–Ø –ë–ï–ó–û–ü–ê–°–ù–ê–Ø –í–°–¢–ê–í–ö–ê –¢–ï–°–¢–û–í–´–• –î–ê–ù–ù–´–•
-- –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ - –æ–Ω –Ω–µ —Å–æ–∑–¥–∞—Å—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
-- –í—Å–µ CHECK constraints —É—á—Ç–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
-- ============================================================================

-- ============================================================================
-- –ö–ê–¢–ï–ì–û–†–ò–ò (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –¥—É–±–ª–µ–π)
-- ============================================================================

INSERT INTO public.categories (name, description, display_order, icon, color) VALUES
('–î–∏—Ç—è—á–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞', '–ö–Ω–∏–≥–∏ –¥–ª—è –¥—ñ—Ç–µ–π –≤—ñ–∫–æ–º –≤—ñ–¥ 0 –¥–æ 12 —Ä–æ–∫—ñ–≤', 1, 'üë∂', '#FFB6C1'),
('–ü—ñ–¥–ª—ñ—Ç–∫–æ–≤–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞', '–ö–Ω–∏–≥–∏ –¥–ª—è –ø—ñ–¥–ª—ñ—Ç–∫—ñ–≤ –≤—ñ–∫–æ–º –≤—ñ–¥ 12 –¥–æ 18 —Ä–æ–∫—ñ–≤', 2, 'üßí', '#87CEEB'),
('–ö–∞–∑–∫–∏', '–ù–∞—Ä–æ–¥–Ω—ñ —Ç–∞ –∞–≤—Ç–æ—Ä—Å—å–∫—ñ –∫–∞–∑–∫–∏ –¥–ª—è –¥—ñ—Ç–µ–π', 3, 'üè∞', '#DDA0DD'),
('–ü—Ä–∏–≥–æ–¥–∏', '–ü—Ä–∏–≥–æ–¥–Ω–∏—Ü—å–∫—ñ —ñ—Å—Ç–æ—Ä—ñ—ó —Ç–∞ –¥–µ—Ç–µ–∫—Ç–∏–≤–∏', 4, 'üó∫Ô∏è', '#98FB98'),
('–ù–∞—É–∫–∞', '–ù–∞—É–∫–æ–≤–æ-–ø–æ–ø—É–ª—è—Ä–Ω—ñ –∫–Ω–∏–≥–∏ –¥–ª—è –¥—ñ—Ç–µ–π', 5, 'üî¨', '#F0E68C'),
('–ï–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—ó', '–î–æ–≤—ñ–¥–∫–æ–≤—ñ —Ç–∞ –Ω–∞–≤—á–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏', 6, 'üìö', '#FFA07A')
ON CONFLICT (name) DO NOTHING;

-- ============================================================================
-- –ê–í–¢–û–†–´ (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –¥—É–±–ª–µ–π)
-- ============================================================================

INSERT INTO public.authors (name, nationality, biography) VALUES
('–°–≤—ñ—Ç–ª–∞–Ω–∞ –ú–∞–∫—Å–∏–º–µ–Ω–∫–æ', '–£–∫—Ä–∞—ó–Ω–∞', '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –¥–∏—Ç—è—á–∞ –ø–∏—Å—å–º–µ–Ω–Ω–∏—Ü—è'),
('–ú–µ“ë–∞–Ω –ú–∞–∫–¥–æ–Ω–∞–ª—å–¥', '–°–®–ê', '–ê–º–µ—Ä–∏–∫–∞–Ω—Å—å–∫–∞ –ø–∏—Å—å–º–µ–Ω–Ω–∏—Ü—è –¥–∏—Ç—è—á–∏—Ö –∫–Ω–∏–≥'),
('–û–ª–µ–∫—Å–∞ –°—Ç–æ—Ä–æ–∂–µ–Ω–∫–æ', '–£–∫—Ä–∞—ó–Ω–∞', '–ö–ª–∞—Å–∏–∫ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –¥–∏—Ç—è—á–æ—ó –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∏'),
('–ü–µ—Ç—Ä–æ –°–∏–Ω—è–≤—Å—å–∫–∏–π', '–£–∫—Ä–∞—ó–Ω–∞', '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –¥–∏—Ç—è—á–∏–π –ø–∏—Å—å–º–µ–Ω–Ω–∏–∫'),
('–ú–∞—Ä–∏–Ω–∞ –ü–∞–≤–ª–µ–Ω–∫–æ', '–£–∫—Ä–∞—ó–Ω–∞', '–°—É—á–∞—Å–Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –∞–≤—Ç–æ—Ä–∫–∞'),
('–ï–Ω–¥—ñ –†–∞–π–ª—ñ', '–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω—ñ—è', '–ë—Ä–∏—Ç–∞–Ω—Å—å–∫–∏–π –¥–∏—Ç—è—á–∏–π –ø–∏—Å—å–º–µ–Ω–Ω–∏–∫'),
('–ó–∞—Ö–∞—Ä –ë–µ—Ä–∫—É—Ç', '–£–∫—Ä–∞—ó–Ω–∞', '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –ø–∏—Å—å–º–µ–Ω–Ω–∏–∫'),
('–ù–∞—Ä–æ–¥–Ω—ñ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –∫–∞–∑–∫–∏', '–£–∫—Ä–∞—ó–Ω–∞', '–ó–±—ñ—Ä–∫–∞ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏—Ö —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –∫–∞–∑–æ–∫'),
('–ö–æ–ª–µ–∫—Ç–∏–≤ –∞–≤—Ç–æ—Ä—ñ–≤', '–£–∫—Ä–∞—ó–Ω–∞', '–ö–æ–ª–µ–∫—Ç–∏–≤–Ω—ñ —Ä–æ–±–æ—Ç–∏ —Ä—ñ–∑–Ω–∏—Ö –∞–≤—Ç–æ—Ä—ñ–≤')
ON CONFLICT (name) DO NOTHING;

-- ============================================================================
-- –ö–ù–ò–ì–ò (—Å ON CONFLICT –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–µ–π)
-- ============================================================================

INSERT INTO public.books (
    code, title, author, category, pages, status, available, 
    rating, rating_count, badges, short_description, age_range, cover_url,
    qty_total, qty_available, price_uah, location
) VALUES
-- –î–≤—ñ –±—ñ–ª–∫–∏ —ñ —à–∏—à–∫–∞ –∑ –≥—ñ–ª–∫–∏
('DL-001', '–î–≤—ñ –±—ñ–ª–∫–∏ —ñ —à–∏—à–∫–∞ –∑ –≥—ñ–ª–∫–∏', '–°–≤—ñ—Ç–ª–∞–Ω–∞ –ú–∞–∫—Å–∏–º–µ–Ω–∫–æ', '–î–∏—Ç—è—á–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞', 
 32, 'available', true, 4.8, 156, ARRAY['–ù–æ–≤–µ'], 
 '–ß–∞—Ä—ñ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –ø—Ä–æ –¥–≤–æ—Ö –±—ñ–ª–æ—á–æ–∫ —Ç–∞ —ó—Ö–Ω—ñ –ø—Ä–∏–≥–æ–¥–∏ –≤ –ª—ñ—Å—ñ. –ö–Ω–∏–≥–∞ –Ω–∞–≤—á–∞—î –¥—ñ—Ç–µ–π –¥—Ä—É–∂–±—ñ, –≤–∑–∞—î–º–æ–¥–æ–ø–æ–º–æ–∑—ñ —Ç–∞ —Ç—É—Ä–±–æ—Ç—ñ –ø—Ä–æ –ø—Ä–∏—Ä–æ–¥—É.', 
 '3-7 —Ä–æ–∫—ñ–≤', 'https://res.cloudinary.com/dchx7vd97/image/upload/v1/stefa-books/covers/dvi-bilki-i-shishka-z-gilki_1.webp',
 2, 2, 150.00, '–ü–æ–ª–∏—Ü—è A-1'),

-- –î–∂—É–¥—ñ –ú—É–¥—ñ
('DL-002', '–î–∂—É–¥—ñ –ú—É–¥—ñ', '–ú–µ“ë–∞–Ω –ú–∞–∫–¥–æ–Ω–∞–ª—å–¥', '–î–∏—Ç—è—á–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞', 
 128, 'available', true, 4.6, 203, ARRAY['–ü–æ–ø—É–ª—è—Ä–Ω–µ'], 
 '–í–µ—Å–µ–ª—ñ –ø—Ä–∏–≥–æ–¥–∏ –¥—ñ–≤—á–∏–Ω–∫–∏ –î–∂—É–¥—ñ –ú—É–¥—ñ, —è–∫–∞ –∑–∞–≤–∂–¥–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ –∫—É–º–µ–¥–Ω—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó. –°–µ—Ä—ñ—è –∫–Ω–∏–≥, —â–æ —Ä–æ–∑–≤–∏–≤–∞—î –ø–æ—á—É—Ç—Ç—è –≥—É–º–æ—Ä—É —É –¥—ñ—Ç–µ–π.', 
 '6-10 —Ä–æ–∫—ñ–≤', 'https://res.cloudinary.com/dchx7vd97/image/upload/v1/stefa-books/covers/dzhudi-mudi_8.webp',
 3, 3, 220.00, '–ü–æ–ª–∏—Ü—è A-2'),

-- –ó–∞—Ö–∞—Ä –ë–µ—Ä–∫—É—Ç
('PL-001', '–ó–∞—Ö–∞—Ä –ë–µ—Ä–∫—É—Ç', '–ó–∞—Ö–∞—Ä –ë–µ—Ä–∫—É—Ç', '–ü—ñ–¥–ª—ñ—Ç–∫–æ–≤–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞', 
 184, 'available', true, 4.9, 312, ARRAY['–ö–ª–∞—Å–∏–∫–∞'], 
 '–Ü—Å—Ç–æ—Ä–∏—á–Ω–∏–π —Ä–æ–º–∞–Ω –ø—Ä–æ –±–æ—Ä–æ—Ç—å–±—É —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ –Ω–∞—Ä–æ–¥—É –ø—Ä–æ—Ç–∏ –º–æ–Ω–≥–æ–ª—å—Å—å–∫–æ—ó –Ω–∞–≤–∞–ª–∏. –ö–ª–∞—Å–∏–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∏ –¥–ª—è –ø—ñ–¥–ª—ñ—Ç–∫—ñ–≤.', 
 '12-16 —Ä–æ–∫—ñ–≤', 'https://res.cloudinary.com/dchx7vd97/image/upload/v1/stefa-books/covers/zahar-berkut_4_1.webp',
 2, 1, 280.00, '–ü–æ–ª–∏—Ü—è B-1'),

-- –ì—ñ–º–Ω–∞–∑–∏—Å—Ç —ñ —á–æ—Ä–Ω–∞ —Ä—É–∫–∞
('PG-001', '–ì—ñ–º–Ω–∞–∑–∏—Å—Ç —ñ —á–æ—Ä–Ω–∞ —Ä—É–∫–∞', '–ü–µ—Ç—Ä–æ –°–∏–Ω—è–≤—Å—å–∫–∏–π', '–ü—Ä–∏–≥–æ–¥–∏', 
 156, 'available', true, 4.4, 89, ARRAY['–î–µ—Ç–µ–∫—Ç–∏–≤'], 
 '–ó–∞—Ö–æ–ø–ª—é—é—á–∏–π –¥–µ—Ç–µ–∫—Ç–∏–≤ –ø—Ä–æ –≥—ñ–º–Ω–∞–∑–∏—Å—Ç–∞, —è–∫–∏–π —Ä–æ–∑–∫—Ä–∏–≤–∞—î —Ç–∞—î–º–Ω–∏—Ü—é —á–æ—Ä–Ω–æ—ó —Ä—É–∫–∏. –ö–Ω–∏–≥–∞ —Ç—Ä–∏–º–∞—î –≤ –Ω–∞–ø—Ä—É–∑—ñ –¥–æ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏.', 
 '10-14 —Ä–æ–∫—ñ–≤', 'https://res.cloudinary.com/dchx7vd97/image/upload/v1/stefa-books/covers/gimnazist-i-chorna-ruka_3.webp',
 1, 1, 195.00, '–ü–æ–ª–∏—Ü—è C-1'),

-- –ö–∞–∑–æ—á–∫–∏ –î–æ–Ω—ñ —Ç–∞ –°–∏–Ω–æ—á–∫—É
('KZ-001', '–ö–∞–∑–æ—á–∫–∏ –î–æ–Ω—ñ —Ç–∞ –°–∏–Ω–æ—á–∫—É', '–ù–∞—Ä–æ–¥–Ω—ñ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –∫–∞–∑–∫–∏', '–ö–∞–∑–∫–∏', 
 64, 'available', true, 4.7, 134, ARRAY['–¢—Ä–∞–¥–∏—Ü—ñ–π–Ω—ñ'], 
 '–ó–±—ñ—Ä–∫–∞ –Ω–∞–π–∫—Ä–∞—â–∏—Ö —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –Ω–∞—Ä–æ–¥–Ω–∏—Ö –∫–∞–∑–æ–∫ –ø—Ä–æ –î–æ–Ω—é —Ç–∞ –°–∏–Ω–æ—á–∫–∞. –Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –ø–µ—Ä–µ–¥ —Å–Ω–æ–º.', 
 '3-8 —Ä–æ–∫—ñ–≤', 'https://res.cloudinary.com/dchx7vd97/image/upload/v1/stefa-books/covers/kazochki-doni-ta-sinochku-ukrains-ki-kazki.webp',
 2, 2, 160.00, '–ü–æ–ª–∏—Ü—è D-1'),

-- –ó–∞—î—Ü—å –ì—ñ–±—ñ—Å–∫—É—Å —ñ —á–µ–º–ø—ñ–æ–Ω–∞—Ç –ª—ñ—Å—É –∑ —Ñ—É—Ç–±–æ–ª—É
('PG-002', '–ó–∞—î—Ü—å –ì—ñ–±—ñ—Å–∫—É—Å —ñ —á–µ–º–ø—ñ–æ–Ω–∞—Ç –ª—ñ—Å—É –∑ —Ñ—É—Ç–±–æ–ª—É', '–ï–Ω–¥—ñ –†–∞–π–ª—ñ', '–ü—Ä–∏–≥–æ–¥–∏', 
 92, 'available', true, 4.3, 76, ARRAY['–°–ø–æ—Ä—Ç'], 
 '–í–µ—Å–µ–ª—ñ –ø—Ä–∏–≥–æ–¥–∏ –∑–∞–π—Ü—è –ì—ñ–±—ñ—Å–∫—É—Å–∞ –Ω–∞ –ª—ñ—Å–æ–≤–æ–º—É —á–µ–º–ø—ñ–æ–Ω–∞—Ç—ñ –∑ —Ñ—É—Ç–±–æ–ª—É. –ö–Ω–∏–≥–∞ –ø—Ä–æ –¥—Ä—É–∂–±—É, –∫–æ–º–∞–Ω–¥–Ω—É —Ä–æ–±–æ—Ç—É —Ç–∞ —Å–ø–æ—Ä—Ç.', 
 '5-9 —Ä–æ–∫—ñ–≤', 'https://res.cloudinary.com/dchx7vd97/image/upload/v1/stefa-books/covers/zaec-gibiskus-i-chempionat-lisu-z-futbolu.webp',
 1, 0, 175.00, '–ü–æ–ª–∏—Ü—è C-2'),

-- –¢—Ä–∞–∫—Ç–æ—Ä–µ—Ü—å –±–æ—ó—Ç—å—Å—è
('DL-003', '–¢—Ä–∞–∫—Ç–æ—Ä–µ—Ü—å –±–æ—ó—Ç—å—Å—è', '–ú–∞—Ä–∏–Ω–∞ –ü–∞–≤–ª–µ–Ω–∫–æ', '–î–∏—Ç—è—á–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞', 
 48, 'available', true, 4.5, 67, ARRAY['–ï–º–æ—Ü—ñ—ó'], 
 '–Ü—Å—Ç–æ—Ä—ñ—è –ø—Ä–æ –º–∞–ª–µ–Ω—å–∫–∏–π —Ç—Ä–∞–∫—Ç–æ—Ä–µ—Ü—å, —è–∫–∏–π –Ω–∞–≤—á–∞—î—Ç—å—Å—è –¥–æ–ª–∞—Ç–∏ —Å–≤–æ—ó —Å—Ç—Ä–∞—Ö–∏. –î–æ–ø–æ–º–∞–≥–∞—î –¥—ñ—Ç—è–º —Ä–æ–∑—É–º—ñ—Ç–∏ —ñ –¥–æ–ª–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–Ω—è.', 
 '3-6 —Ä–æ–∫—ñ–≤', 'https://res.cloudinary.com/dchx7vd97/image/upload/v1/stefa-books/covers/traktorec-boit-sja.webp',
 1, 1, 140.00, '–ü–æ–ª–∏—Ü—è A-3'),

-- –ü—ñ–¥ –∂–æ–≤—Ç–∏–º –Ω–µ–±–æ–º –º—Ä—ñ–π
('PL-002', '–ü—ñ–¥ –∂–æ–≤—Ç–∏–º –Ω–µ–±–æ–º –º—Ä—ñ–π', '–ú–∞—Ä–∏–Ω–∞ –ü–∞–≤–ª–µ–Ω–∫–æ', '–ü—ñ–¥–ª—ñ—Ç–∫–æ–≤–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞', 
 168, 'available', true, 4.2, 95, ARRAY['–°—É—á–∞—Å–Ω–µ'], 
 '–°—É—á–∞—Å–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –ø—Ä–æ –ø—ñ–¥–ª—ñ—Ç–∫—ñ–≤, —ó—Ö–Ω—ñ –º—Ä—ñ—ó —Ç–∞ –≤–∏–∫–ª–∏–∫–∏. –ö–Ω–∏–≥–∞ –ø—Ä–æ –¥—Ä—É–∂–±—É, —Å–∞–º–æ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ –ø–æ—à—É–∫ —Å–≤–æ–≥–æ –º—ñ—Å—Ü—è –≤ —Å–≤—ñ—Ç—ñ.', 
 '12-16 —Ä–æ–∫—ñ–≤', 'https://res.cloudinary.com/dchx7vd97/image/upload/v1/stefa-books/covers/pid-zhovtim-nebom-mrij.webp',
 1, 1, 240.00, '–ü–æ–ª–∏—Ü—è B-2'),

-- –ï–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—è –¥–ª—è –¥—ñ—Ç–µ–π
('EN-001', '–î–∏—Ç—è—á–∞ –µ–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—è —Ç–≤–∞—Ä–∏–Ω', '–ö–æ–ª–µ–∫—Ç–∏–≤ –∞–≤—Ç–æ—Ä—ñ–≤', '–ï–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—ó', 
 200, 'available', true, 4.6, 123, ARRAY['–û—Å–≤—ñ—Ç–Ω—ñ'], 
 '–ó–∞—Ö–æ–ø–ª—é—é—á–∞ –µ–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—è –ø—Ä–æ —Ç–≤–∞—Ä–∏–Ω –∑ —è—Å–∫—Ä–∞–≤–∏–º–∏ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è–º–∏. –î–æ–ø–æ–º–∞–≥–∞—î –¥—ñ—Ç—è–º –≤–∏–≤—á–∞—Ç–∏ –ø—Ä–∏—Ä–æ–¥—É —Ç–∞ —Ä–æ–∑–≤–∏–≤–∞—Ç–∏ –ª—é–±–æ–≤ –¥–æ —Ç–≤–∞—Ä–∏–Ω.', 
 '6-12 —Ä–æ–∫—ñ–≤', 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=600&fit=crop',
 1, 1, 320.00, '–ü–æ–ª–∏—Ü—è E-1'),

-- –î–æ–¥–∞—Ç–∫–æ–≤–∞ –∫–∞–∑–∫–∞
('KZ-002', '–ö–æ—Ç–∏–∫ —ñ –ø–µ—Å–∏–∫', '–ù–∞—Ä–æ–¥–Ω—ñ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –∫–∞–∑–∫–∏', '–ö–∞–∑–∫–∏', 
 40, 'available', true, 4.4, 89, ARRAY['–¢—Ä–∞–¥–∏—Ü—ñ–π–Ω—ñ'], 
 '–î–æ–±—Ä–∞ –∫–∞–∑–∫–∞ –ø—Ä–æ –¥—Ä—É–∂–±—É –∫–æ—Ç–∏–∫–∞ —ñ –ø–µ—Å–∏–∫–∞. –í—á–∏—Ç—å –¥—ñ—Ç–µ–π —Ü—ñ–Ω—É–≤–∞—Ç–∏ —Å–ø—Ä–∞–≤–∂–Ω—é –¥—Ä—É–∂–±—É —Ç–∞ –≤–∑–∞—î–º–æ–¥–æ–ø–æ–º–æ–≥—É.', 
 '3-7 —Ä–æ–∫—ñ–≤', 'https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=600&fit=crop',
 1, 1, 135.00, '–ü–æ–ª–∏—Ü—è D-2')

ON CONFLICT (code) DO NOTHING;

-- ============================================================================
-- –¢–ï–°–¢–û–í–Ü –ö–û–†–ò–°–¢–£–í–ê–ß–Ü 
-- subscription_type: 'mini', 'maxi', 'premium' (–Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä)
-- ============================================================================

INSERT INTO public.users (name, email, phone, subscription_type, subscription_start, subscription_end, status, address) VALUES
('–ê–Ω–Ω–∞ –ö–æ–≤–∞–ª–µ–Ω–∫–æ', 'anna.kovalenko@gmail.com', '+380671234567', 'mini', '2024-01-15', '2024-07-15', 'active', '–≤—É–ª. –®–µ–≤—á–µ–Ω–∫–∞ 15, –ú–∏–∫–æ–ª–∞—ó–≤'),
('–û–ª–µ–≥ –ü–µ—Ç—Ä–µ–Ω–∫–æ', 'oleg.petrenko@ukr.net', '+380509876543', 'maxi', '2024-02-01', '2024-08-01', 'active', '–≤—É–ª. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞ 22, –ú–∏–∫–æ–ª–∞—ó–≤'),
('–ú–∞—Ä—ñ—è –Ü–≤–∞–Ω–æ–≤–∞', 'maria.ivanova@gmail.com', '+380631234567', 'mini', '2024-03-10', '2024-09-10', 'active', '–ø—Ä–æ—Å–ø. –ú–∏—Ä—É 8, –ú–∏–∫–æ–ª–∞—ó–≤'),
('–î–º–∏—Ç—Ä–æ –°–∏–¥–æ—Ä–µ–Ω–∫–æ', 'dmytro.sydorenko@ukr.net', '+380951234567', 'premium', '2024-01-01', '2024-07-01', 'active', '–≤—É–ª. –ê–¥–º—ñ—Ä–∞–ª–∞ –ú–∞–∫–∞—Ä–æ–≤–∞ 45, –ú–∏–∫–æ–ª–∞—ó–≤'),
('–û–ª–µ–Ω–∞ –ú–µ–ª—å–Ω–∏–∫', 'olena.melnyk@gmail.com', '+380631112233', 'maxi', '2024-03-01', '2024-09-01', 'active', '–≤—É–ª. –ì–µ—Ä–æ—ó–≤ –£–∫—Ä–∞—ó–Ω–∏ 12, –ú–∏–∫–æ–ª–∞—ó–≤')
ON CONFLICT (email) DO NOTHING;

-- ============================================================================
-- –¢–ï–°–¢–û–í–´–ï –ê–†–ï–ù–î–´
-- ============================================================================

-- –ê—Ä–µ–Ω–¥–∞ –∫–Ω–∏–≥–∏ "–ó–∞—Ö–∞—Ä –ë–µ—Ä–∫—É—Ç" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ê–Ω–Ω–æ–π –ö–æ–≤–∞–ª–µ–Ω–∫–æ
INSERT INTO public.rentals (user_id, book_id, rental_date, due_date, status) 
SELECT 
    u.id,
    b.id,
    NOW() - INTERVAL '3 days',
    NOW() + INTERVAL '7 days',
    'active'
FROM public.users u, public.books b 
WHERE u.email = 'anna.kovalenko@gmail.com' 
  AND b.code = 'PL-001'
  AND NOT EXISTS (
      SELECT 1 FROM public.rentals r 
      WHERE r.user_id = u.id AND r.book_id = b.id AND r.status = 'active'
  )
LIMIT 1;

-- –ê—Ä–µ–Ω–¥–∞ –∫–Ω–∏–≥–∏ "–ó–∞—î—Ü—å –ì—ñ–±—ñ—Å–∫—É—Å" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –û–ª–µ–≥–æ–º –ü–µ—Ç—Ä–µ–Ω–∫–æ  
INSERT INTO public.rentals (user_id, book_id, rental_date, due_date, status)
SELECT 
    u.id,
    b.id,
    NOW() - INTERVAL '1 day',
    NOW() + INTERVAL '13 days',
    'active'
FROM public.users u, public.books b 
WHERE u.email = 'oleg.petrenko@ukr.net' 
  AND b.code = 'PG-002'
  AND NOT EXISTS (
      SELECT 1 FROM public.rentals r 
      WHERE r.user_id = u.id AND r.book_id = b.id AND r.status = 'active'
  )
LIMIT 1;

-- ============================================================================
-- –¢–ï–°–¢–û–í–´–ï –ü–õ–ê–¢–ï–ñ–ò 
-- payment_method: 'monobank', 'online', 'cash' (—Ç–æ–ª—å–∫–æ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ø—É—Å—Ç–∏–º—ã)
-- ============================================================================

INSERT INTO public.payments (user_id, amount_uah, payment_method, status, payment_date, description)
SELECT 
    u.id,
    300.00,
    'monobank',
    'completed',
    NOW() - INTERVAL '5 days',
    '–û–ø–ª–∞—Ç–∞ –ø—ñ–¥–ø–∏—Å–∫–∏ Mini –Ω–∞ 6 –º—ñ—Å—è—Ü—ñ–≤'
FROM public.users u 
WHERE u.email = 'anna.kovalenko@gmail.com'
  AND NOT EXISTS (
      SELECT 1 FROM public.payments p 
      WHERE p.user_id = u.id
  )
LIMIT 1;

INSERT INTO public.payments (user_id, amount_uah, payment_method, status, payment_date, description)
SELECT 
    u.id,
    500.00,
    'online',
    'completed',
    NOW() - INTERVAL '2 days',
    '–û–ø–ª–∞—Ç–∞ –ø—ñ–¥–ø–∏—Å–∫–∏ Maxi –Ω–∞ 6 –º—ñ—Å—è—Ü—ñ–≤'
FROM public.users u 
WHERE u.email = 'oleg.petrenko@ukr.net'
  AND NOT EXISTS (
      SELECT 1 FROM public.payments p 
      WHERE p.user_id = u.id
  )
LIMIT 1;

INSERT INTO public.payments (user_id, amount_uah, payment_method, status, payment_date, description)
SELECT 
    u.id,
    2500.00,
    'cash',
    'completed',
    NOW() - INTERVAL '10 days',
    '–û–ø–ª–∞—Ç–∞ –ø—ñ–¥–ø–∏—Å–∫–∏ Premium –Ω–∞ 6 –º—ñ—Å—è—Ü—ñ–≤'
FROM public.users u 
WHERE u.email = 'dmytro.sydorenko@ukr.net'
  AND NOT EXISTS (
      SELECT 1 FROM public.payments p 
      WHERE p.user_id = u.id
  )
LIMIT 1;

-- ============================================================================
-- –¢–ï–°–¢–û–í–´–ï –ü–û–ò–°–ö–û–í–´–ï –ó–ê–ü–†–û–°–´ (–¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏)
-- ============================================================================

INSERT INTO public.search_queries (query, results_count, search_time_ms, filters) VALUES
('–∫–∞–∑–∫–∏', 15, 45.2, '{"category": "–ö–∞–∑–∫–∏"}'),
('–ø—Ä–∏–≥–æ–¥–∏', 8, 32.1, '{"available_only": true}'),
('–¥–∏—Ç—è—á–∞', 23, 67.8, '{"age_range": "3-7 —Ä–æ–∫—ñ–≤"}'),
('–ú–∞—Ä–∏–Ω–∞ –ü–∞–≤–ª–µ–Ω–∫–æ', 2, 28.5, '{"author": "–ú–∞—Ä–∏–Ω–∞ –ü–∞–≤–ª–µ–Ω–∫–æ"}'),
('–µ–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—è', 3, 41.2, '{"category": "–ï–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—ó"}')
ON CONFLICT DO NOTHING;

-- ============================================================================
-- –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–û–ò–°–ö–û–í–´–• –í–ï–ö–¢–û–†–û–í
-- ============================================================================

-- –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–µ –≤–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –∫–Ω–∏–≥
UPDATE public.books SET 
    search_text = title || ' ' || author || ' ' || category || ' ' || COALESCE(description, '') || ' ' || COALESCE(short_description, ''),
    search_vector = to_tsvector('ukrainian', title || ' ' || author || ' ' || category || ' ' || COALESCE(description, '') || ' ' || COALESCE(short_description, ''))
WHERE search_vector IS NULL OR search_text IS NULL;

-- –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–µ –≤–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤  
UPDATE public.authors SET 
    search_vector = to_tsvector('ukrainian', name || ' ' || COALESCE(biography, '') || ' ' || COALESCE(nationality, ''))
WHERE search_vector IS NULL;

-- –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–µ –≤–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
UPDATE public.categories SET 
    search_vector = to_tsvector('ukrainian', name || ' ' || COALESCE(description, ''))
WHERE search_vector IS NULL;

-- ============================================================================
-- –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–ß–ï–¢–ß–ò–ö–û–í –î–û–°–¢–£–ü–ù–û–°–¢–ò –ü–û –ê–†–ï–ù–î–ê–ú
-- ============================================================================

-- –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–Ω–∏–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞—Ä–µ–Ω–¥
UPDATE public.books 
SET 
    qty_available = GREATEST(0, qty_total - (
        SELECT COUNT(*) 
        FROM public.rentals 
        WHERE book_id = books.id 
        AND status IN ('active', 'overdue')
    )),
    status = CASE 
        WHEN qty_total - (
            SELECT COUNT(*) 
            FROM public.rentals 
            WHERE book_id = books.id 
            AND status IN ('active', 'overdue')
        ) > 0 THEN 'available'
        ELSE 'issued'
    END,
    available = (qty_total - (
        SELECT COUNT(*) 
        FROM public.rentals 
        WHERE book_id = books.id 
        AND status IN ('active', 'overdue')
    )) > 0;

-- ============================================================================
-- –†–ï–ó–£–õ–¨–¢–ê–¢
-- ============================================================================

SELECT 
    (SELECT COUNT(*) FROM public.books) as books_count,
    (SELECT COUNT(*) FROM public.authors) as authors_count, 
    (SELECT COUNT(*) FROM public.categories) as categories_count,
    (SELECT COUNT(*) FROM public.users) as users_count,
    (SELECT COUNT(*) FROM public.rentals) as rentals_count,
    (SELECT COUNT(*) FROM public.payments) as payments_count,
    (SELECT COUNT(*) FROM public.search_queries) as queries_count,
    'Complete sample data inserted successfully! All constraints respected.' as message;