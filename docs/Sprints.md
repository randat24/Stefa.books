# Stefa.Books — План спринтов

Ниже — последовательность спринтов для выхода к стабильному MVP сайта с каталогом и подпиской. Для каждого спринта указаны цели, объём, критерии готовности и риски.

Обозначения статуса задач: TODO / IN-PROGRESS / BLOCKED / DONE. Чек-листы — в `Tasktracker.md`.

---

## Спринт 0. Подготовка бренда и базовая техническая площадка (1–2 дня)

**Цели**
- Утвердить и подключить уникальный визуальный стиль (без использования эмодзи в интерфейсе)
- Настроить проект: окружение, линтеры, типы, базовые страницы, иконки

**Объём**
- `[ ]` Заменить логотип и фавиконы, добавить PWA-иконки
- `[ ]` Обновить `globals.css`: базовые токены (цвета, типографика, отступы)
- `[ ]` Обновить `Header`/`Footer` под новый логотип
- `[ ]` Подготовить структуру страниц (`/`, `/catalog`) и заглушки компонентов
- `[ ]` Проверка сборки и деплоя в Vercel, переменные окружения

**Критерии готовности**
- Сайт с новым логотипом/иконками успешно деплоится
- В репозитории проходят `typecheck` и `lint`

**Риски**
- Задержка с финальными цветами/вариантами логотипа

---

## Спринт 1. Каталог книг и быстрый просмотр (5–7 дней)

**Цели**
- Реализовать чистый каталог и Quick View без полной карточки страницы
- Подключить форму подписки с минимальными полями

**Объём**
- `[ ]` Сетка каталога: xl=5, lg=4, md=2, sm=1
- `[ ]` Компонент `BookCard` (обложка, название, автор, статус)
- `[ ]` Компонент `BookPreviewModal` на Radix UI + Framer Motion
- `[ ]` Компонент `RentalForm` (имя, телефон, план, доставка)
- `[ ]` Серверный обработчик для записи в `subscription_requests` (Supabase)
- `[ ]` Skeleton-загрузки, lazy-изображения

**Критерии готовности**
- Пользователь может открыть быстрый просмотр и оставить заявку на подписку
- Данные заявки попадают в Supabase, валидация отрабатывает

**Риски**
- Неполные данные по книгам; временно допускается mock

---

## Спринт 2. Поиск, фильтры, SEO (5–7 дней)

**Цели**
- Сделать каталог удобным для навигации и улучшить видимость сайта

**Объём**
- `[ ]` Поиск по названию/автору (клиентский минимум)
- `[ ]` Фильтры/счётчики по категориям (если доступны из БД)
- `[ ]` Пагинация или «показать ещё»
- `[ ]` Мета-данные Next 15: `metadata`, `sitemap`, `robots`
- `[ ]` Lighthouse ≥ 90 для главных страниц

**Критерии готовности**
- Каталог масштабируется до 100+ книг без проседания UX
- SEO-базис на месте; теги корректно формируются

**Риски**
- Изменения схемы БД категорий/книг

---

## Спринт 3. Авторизация и личный кабинет (7–10 дней)

**Цели**
- Подготовить основу для персонализации и будущих функций аренды

**Объём**
- `[ ]` Авторизация через Supabase Auth (email-link/OTP)
- `[ ]` Мини-кабинет: данные профиля, статус подписки (read-only)
- `[ ]` Логика отображения CTA в QuickView: «Оформить подписку» vs «Взять в аренду»
- `[ ]` Обновление RLS (deny-by-default), проверка политик

**Критерии готовности**
- Пользователь может войти и увидеть свой статус
- RLS-политики не допускают утечки данных

**Риски**
- Сценарии восстановления доступа и подтверждения email

---

## Спринт 4. Интеграции и уведомления (5–7 дней)

**Цели**
- Подготовить мост к Telegram-боту/mini-app и уведомлениям

**Объём**
- `[ ]` Веб-входы для бота: проверка подписки, получение списка книг
- `[ ]` Старт нотификаций (e-mail/webhook) для заявок на подписку
- `[ ]` Базовые аналитические события (отправка формы, открытие QuickView)

**Критерии готовности**
- Минимальный обмен данными сайт ↔ бот работает
- События фиксируются в аналитике

**Риски**
- Синхронизация схемы данных и авторизации между сайт/ботом

---

## Definition of Done (общие для всех спринтов)

### Код
- Проходит `pnpm type-check` и `pnpm lint`
- Нет регрессий на основных разрешениях: мобильный, планшет, десктоп
- Lighthouse ≥ 90 по Performance/Accessibility/SEO на целевых страницах

### Тестирование
- Unit тесты для новых компонентов
- E2E тесты для критических пользовательских сценариев
- Ручное тестирование на разных устройствах

### Документация
- Обновлены соответствующие разделы в `Project.md` и `Diary.md`
- README обновлен при изменении API

### Деплой
- Успешный деплой на Vercel
- Preview деплой для PR
- Проверка работоспособности в production

---

## Метрики и KPI

### Технические метрики
- **Производительность**: Lighthouse score ≥ 90
- **Надёжность**: Время безотказной работы > 99.9%
- **Безопасность**: Zero критических уязвимостей
- **Доступность**: WCAG 2.1 AA compliance

### Бизнес метрики
- **Конверсия**: Подписки > 5% от посетителей
- **Вовлечённость**: Время на сайте > 2 минуты
- **Удержание**: Возврат пользователей > 30%

### UX метрики
- **Удобство**: Время до оформления заявки < 3 минуты
- **Удовлетворённость**: NPS > 50
- **Ошибки**: < 2% неудачных попыток оформления

---

## Риск-менеджмент

### Высокие риски
1. **Изменения в дизайне** — может задержать спринт 0-1
2. **Проблемы с Supabase** — может заблокировать спринт 1-3
3. **Неполные данные** — может замедлить спринт 1-2

### Стратегии митигации
1. **Гибкая архитектура** — возможность быстрого переключения между mock и реальными данными
2. **Модульная разработка** — независимые компоненты для легкого рефакторинга
3. **Постоянное тестирование** — раннее выявление проблем

### План B
- При критических проблемах — фокус на core функциональности
- Возможность отката к предыдущей стабильной версии
- Использование временных решений для демонстрации

---

## Коммуникация и отчётность

### Ежедневные standup
- Что сделано вчера
- Что планируется сегодня
- Блокеры и проблемы

### Еженедельные ретроспективы
- Что работает хорошо
- Что можно улучшить
- План действий

### Демо в конце спринта
- Презентация функциональности
- Обратная связь от стейкхолдеров
- Планирование следующего спринта

---

## Ресурсы и зависимости

### Внутренние зависимости
- Дизайн-система и компоненты
- API endpoints и база данных
- Инфраструктура и деплой

### Внешние зависимости
- Supabase (база данных и аутентификация)
- Cloudinary (хранение изображений)
- Vercel (хостинг и CDN)

### Команда
- Frontend разработчик
- Backend разработчик (при необходимости)
- Дизайнер (для UI/UX вопросов)
- Product Owner (для приоритизации)
