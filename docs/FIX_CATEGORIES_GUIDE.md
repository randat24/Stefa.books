# Исправление пустых категорий и генерация артикулов

## Проблема
У вас есть книги с пустыми категориями (`category: ""`) и `null` артикулами, что не позволяет сгенерировать артикулы по новой системе.

## Решение

### Вариант 1: Использовать SQL скрипт (быстро)

```bash
# Выполнить исправление категорий и генерацию артикулов
psql -h your-db-host -U your-username -d your-database -f fix-categories-and-articles.sql
```

### Вариант 2: Использовать Node.js скрипт (пошагово)

```bash
# 1. Сначала исправить только категории
node scripts/update-books-articles.js fix-categories

# 2. Затем сгенерировать артикулы
node scripts/update-books-articles.js update

# 3. Проверить результат
node scripts/update-books-articles.js stats
```

## Логика определения категорий

Скрипт автоматически определяет категории на основе анализа названий книг:

- **Дитяча література** - книги со словами: казк, дитяч, малюк, найменш, дошкільн, молодш, енциклопед, пізнавальн
- **Підліткова література** - книги со словами: підлітков, романт, кохан, любов, мрі, космос
- **Книжки-картинки** - книги со словами: лама, бодьо, яйце, дві білки, панда, тигр, грушк
- **Класична література** - книги со словами: маленький принц, мауглі, рікі-тікі, захар беркут, кайдашева, енейіда, аліса
- **Науково-популярна література** - книги со словами: енциклопед, пізнавальн, школа, емоційн, тіло, смартфон, пластик
- **Історична література** - книги со словами: україн, істор, читаємо про
- **Психологія та розвиток** - книги со словами: психолог, саморозвит, емоційн, ефективн, спати, смисл, інтелект, ессенціал

## Результат

После выполнения скрипта все книги получат:
1. ✅ Правильные категории (на основе анализа названий)
2. ✅ Артикулы согласно новой системе:
   - PL-001, PL-002, PL-003 (Підліткова література)
   - DL-001, DL-002, DL-003 (Дитяча література)
   - KP-001, KP-002, KP-003 (Книжки-картинки)
   - KL-001, KL-002 (Класична література)
   - NP-001, NP-002 (Науково-популярна література)
   - IL-001 (Історична література)
   - PD-001 (Психологія та розвиток)

## Проверка

После выполнения проверьте результат:

```sql
-- Статистика по категориям и артикулам
SELECT 
  category,
  COUNT(*) as total_books,
  MIN(article) as first_article,
  MAX(article) as last_article
FROM books 
WHERE article IS NOT NULL 
GROUP BY category 
ORDER BY category;

-- Книги без артикулов (должно быть 0)
SELECT COUNT(*) as books_without_articles
FROM books 
WHERE article IS NULL OR article = '';
```

---

**Дата**: 2024-12-21  
**Статус**: Готово к применению
