# Cloudinary –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üéØ –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –º—ã –ø—Ä–∏–º–µ–Ω—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Cloudinary –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø—Ä–æ–µ–∫—Ç–µ Stefa Books, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ [—Ñ—É–Ω–∫—Ü–∏—è—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Cloudinary](https://console.cloudinary.com/app/c-5414e1e9bb66afef825efb62cf5c4d/image/optimize).

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Cloudinary

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **–ö–∞—á–µ—Å—Ç–≤–æ**: `q_auto` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- **–§–æ—Ä–º–∞—Ç**: `f_auto` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (WebP, AVIF, JPEG)
- **–†–∞–∑–º–µ—Ä**: `w_*`, `h_*` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: `fl_immutable_cache` - –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–°–∂–∞—Ç–∏–µ**: –¥–æ 99.5% —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
- **–§–æ—Ä–º–∞—Ç—ã**: WebP, AVIF, JPEG XL –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ cloudinary-optimization.ts    # –û—Å–Ω–æ–≤–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ hooks/
‚îÇ       ‚îî‚îÄ‚îÄ useImageOptimization.ts   # –•—É–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ ui/
‚îÇ       ‚îî‚îÄ‚îÄ OptimizedImage.tsx        # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ BookCard.tsx                  # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–Ω–∏–≥–∏
```

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { getOptimizedBookCover } from '@/lib/cloudinary-optimization';

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ URL
const optimizedUrl = getOptimizedBookCover(originalUrl, 'bookCover');
```

### 2. –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```typescript
// –î–ª—è –æ–±–ª–æ–∂–µ–∫ –∫–Ω–∏–≥ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
const catalogCover = getOptimizedBookCover(url, 'bookCover');

// –î–ª—è –º–∏–Ω–∏–∞—Ç—é—Ä
const thumbnail = getOptimizedBookCover(url, 'thumbnail');

// –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
const mobileCover = getOptimizedBookCover(url, 'mobile');

// –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
const largeCover = getOptimizedBookCover(url, 'bookCoverLarge');
```

### 3. –ö–∞—Å—Ç–æ–º–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```typescript
import { getOptimizedCloudinaryUrl } from '@/lib/cloudinary-optimization';

const customOptimized = getOptimizedCloudinaryUrl(originalUrl, {
  width: 400,
  height: 600,
  quality: 'auto',
  format: 'auto',
  crop: 'fill',
  gravity: 'auto'
});
```

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ OptimizedImage

```tsx
import { OptimizedImage, BookCoverImage } from '@/components/ui/OptimizedImage';

// –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
<OptimizedImage
  src={book.cover_url}
  alt={book.title}
  preset="bookCover"
  className="rounded-lg"
/>

// –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ–±–ª–æ–∂–µ–∫
<BookCoverImage
  src={book.cover_url}
  alt={book.title}
  size="large"
  className="hover:scale-105 transition-transform"
/>
```

### 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```tsx
import { useImageOptimization } from '@/lib/hooks/useImageOptimization';

function ImageWithMetrics({ src }: { src: string }) {
  const { metrics, isLoading, isOptimized } = useImageOptimization(src);
  
  return (
    <div>
      <img src={src} alt="Optimized" />
      {metrics && (
        <div className="text-sm text-gray-600">
          –ó–∞–≥—Ä—É–∑–∫–∞: {metrics.loadTime}ms
          {isOptimized && <span className="text-green-600"> ‚úì –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ</span>}
        </div>
      )}
    </div>
  );
}
```

## üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –†–∞–∑–º–µ—Ä | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-------------|--------|---------------|
| `thumbnail` | 150x200 | –ú–∏–Ω–∏–∞—Ç—é—Ä—ã, —Å–ø–∏—Å–∫–∏ |
| `mobile` | 250x333 | –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ |
| `bookCover` | 300x400 | –ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥ |
| `bookCoverLarge` | 500x700 | –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä |

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Cloudinary

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|----------|---------|
| `w_*` | –®–∏—Ä–∏–Ω–∞ | `w_300` |
| `h_*` | –í—ã—Å–æ—Ç–∞ | `h_400` |
| `q_auto` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ | `q_auto` |
| `f_auto` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç | `f_auto` |
| `c_fill` | –û–±—Ä–µ–∑–∫–∞ —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º | `c_fill` |
| `g_auto` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | `g_auto` |
| `fl_progressive` | –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ | `fl_progressive` |
| `fl_immutable_cache` | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ | `fl_immutable_cache` |

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js

–í `next.config.js` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:

```javascript
images: {
  formats: ['image/webp', 'image/avif'],
  minimumCacheTTL: 60 * 60 * 24 * 7, // 7 –¥–Ω–µ–π
  deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],
  imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  quality: 75,
}
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 18 MB (–æ—Ä–∏–≥–∏–Ω–∞–ª)
- **–§–æ—Ä–º–∞—Ç**: JPEG
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏**: ~3-5 —Å–µ–∫—É–Ω–¥

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 90-135 KB (AVIF/WebP)
- **–§–æ—Ä–º–∞—Ç**: AVIF, WebP, JPEG (–∞–≤—Ç–æ–≤—ã–±–æ—Ä)
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏**: ~200-500ms
- **–£–ª—É—á—à–µ–Ω–∏–µ**: –¥–æ 99.5% —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
const url = getOptimizedBookCover(originalUrl, 'bookCover');

// ‚ùå –ü–ª–æ—Ö–æ
const url = getOptimizedCloudinaryUrl(originalUrl, { width: 300, height: 400 });
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ä–∞–∑–º–µ—Ä—ã
```typescript
// –î–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞
preset="bookCover" // 300x400

// –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
preset="bookCoverLarge" // 500x700

// –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
preset="mobile" // 250x333
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```typescript
const { metrics, isOptimized } = useImageOptimization(imageUrl);
if (metrics) {
  console.log(`–ó–∞–≥—Ä—É–∑–∫–∞: ${metrics.loadTime}ms`);
}
```

### 4. Fallback –¥–ª—è –Ω–µ-Cloudinary –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```typescript
const optimizedUrl = getOptimizedBookCover(
  book.cover_url || '/images/book-placeholder.svg', 
  'bookCover'
);
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```typescript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
const isOptimized = url.includes('res.cloudinary.com') && 
                   (url.includes('q_auto') || url.includes('f_auto'));
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
```typescript
const { metrics } = useImageOptimization(url);
useEffect(() => {
  if (metrics) {
    console.log('Image metrics:', metrics);
  }
}, [metrics]);
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Cloudinary Optimization Overview](https://console.cloudinary.com/app/c-5414e1e9bb66afef825efb62cf5c4d/image/optimize)
- [Cloudinary Image Transformations](https://cloudinary.com/documentation/image_transformations)
- [Next.js Image Optimization](https://nextjs.org/docs/app/api-reference/components/image)
