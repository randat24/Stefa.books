-- Вставка книг из CSV файлов
-- Создано: 2025-01-27

-- Книги из Books_metadata___batch_2.csv
INSERT INTO books (
  title, 
  author, 
  category, 
  description, 
  short_description,
  isbn, 
  pages, 
  age_range, 
  publisher, 
  publication_year,
  status,
  available,
  rating,
  rating_count,
  badges,
  tags
) VALUES
(
  'Ким хотіла бути Панда?',
  'Світлана Мирошниченко',
  'Книжки-картинки',
  'Панда пробує «стати кимось іншим», але вчиться приймати себе такою, як є. Тепла історія про самоприйняття та любов до себе.',
  'Панда пробує «стати кимось іншим», але вчиться приймати себе такою, як є.',
  '978-966-982-353-3',
  48,
  '3-5',
  'Vivat',
  2025,
  'available',
  true,
  0,
  0,
  ARRAY['Нове', 'Повчальне'],
  ARRAY['панда', 'самоприйняття', 'малята', 'психологія', 'любов до себе']
),
(
  'Крижане серце. Магічна колекція',
  'Disney (Egmont Україна)',
  'Книжки-картинки',
  'Подарункове видання з історіями світу «Крижане серце». Збірка казок за мотивами популярного мультфільму.',
  'Подарункове видання з історіями світу «Крижане серце».',
  '978-966-943-944-4',
  48,
  '3+',
  'Егмонт Україна',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Подарункове', 'Disney'],
  ARRAY['крижане серце', 'дисней', 'казки', 'малята', 'подарунок']
),
(
  'Крижане серце 2. Магічна колекція',
  'Disney (Egmont Україна)',
  'Книжки-картинки',
  'Збірка історій за мотивами другої частини мультфільму. Продовження пригод героїв Крижаного серця.',
  'Збірка історій за мотивами другої частини мультфільму.',
  '978-966-943-945-1',
  48,
  '3+',
  'Егмонт Україна',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Подарункове', 'Disney'],
  ARRAY['крижане серце', 'дисней', 'казки', 'малята', 'подарунок']
),
(
  'Чудове Чудовисько. Книга 1',
  'Сашко Дерманський',
  'Дитяча література',
  'Дівчинка Соня знайомиться з Чу — чудовиськом, якому треба заробити сім «подяк», аби не потрапити у Країну жаховиськ.',
  'Дівчинка Соня знайомиться з Чу — чудовиськом, якому треба заробити сім «подяк».',
  '978-966-7047-63-4',
  272,
  '7-12',
  'А-ба-ба-га-ла-ма-га',
  2006,
  'available',
  true,
  0,
  0,
  ARRAY['Класика', 'Серія'],
  ARRAY['чудовисько', 'пригоди', 'дружба', 'діти', 'фентезі']
),
(
  'Гармидер у школі',
  'Джеремі Стронґ',
  'Дитяча література',
  'Комічні пригоди школярів; читання для реготання. Веселі історії про шкільне життя та пригоди учнів.',
  'Комічні пригоди школярів; читання для реготання.',
  '978-966-2909-20-3',
  192,
  '8+',
  'Видавництво Старого Лева',
  2020,
  'available',
  true,
  0,
  0,
  ARRAY['Веселе', 'Школа'],
  ARRAY['школа', 'пригоди', 'веселощі', 'діти', 'гумор']
),
(
  'Чарлі і шоколадна фабрика',
  'Роальд Дал',
  'Дитяча література',
  'Бідний хлопчик Чарлі виграє квиток на екскурсію до фабрики Віллі Вонки. Класична історія про пригоди та дива.',
  'Бідний хлопчик Чарлі виграє квиток на екскурсію до фабрики Віллі Вонки.',
  '978-966-7047-47-4',
  240,
  '7-12',
  'А-ба-ба-га-ла-ма-га',
  2009,
  'available',
  true,
  0,
  0,
  ARRAY['Класика', 'Світова література'],
  ARRAY['чарлі', 'шоколад', 'фабрика', 'пригоди', 'класика']
),
(
  'Джуді Муді. Книга 1',
  'Меган МакДоналд',
  'Дитяча література',
  'Початок серії про винахідливу школярку Джуді. Історії про смішні пригоди та витівки дівчинки.',
  'Початок серії про винахідливу школярку Джуді.',
  '978-617-679-109-6',
  144,
  '7-10',
  'Видавництво Старого Лева',
  2015,
  'available',
  true,
  0,
  0,
  ARRAY['Серія', 'Веселе'],
  ARRAY['джуді муді', 'школа', 'пригоди', 'діти', 'серія']
),
(
  'Бодьо в селі',
  'Марта Галевська-Кустра',
  'Книжки-картинки',
  'Подорож Бодя до села: ферма, стайня, ремесла. Пізнавальна серія про життя в селі та сільські ремесла.',
  'Подорож Бодя до села: ферма, стайня, ремесла.',
  NULL,
  NULL,
  '3-6',
  'Час Майстрів',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Пізнавальне', 'Серія'],
  ARRAY['село', 'ферма', 'ремесла', 'малята', 'пізнавальне']
),
(
  'Енн із Зелених Дахів',
  'Люсі-Мод Монтгомері',
  'Класична література',
  'Сирітка Енн потрапляє до родини на Острові Принца Едварда. Класичний роман про дорослішання та сімейні стосунки.',
  'Сирітка Енн потрапляє до родини на Острові Принца Едварда.',
  '978-966-2647-08-2',
  320,
  '9-12',
  'Урбіно',
  2012,
  'available',
  true,
  0,
  0,
  ARRAY['Класика', 'Світова література'],
  ARRAY['енн', 'зелені дахи', 'сім''я', 'дорослішання', 'класика']
),
(
  'Міо, мій Міо',
  'Астрід Ліндґрен',
  'Дитяча література',
  'Хлопчик потрапляє у Казкове Королівство й вирушає на бій зі злом. Казкова повість про хоробрість та пригоди.',
  'Хлопчик потрапляє у Казкове Королівство й вирушає на бій зі злом.',
  '978-617-828-087-1',
  160,
  '6-12',
  'Видавництво РМ (Рідна мова)',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Класика', 'Казка'],
  ARRAY['міо', 'казка', 'пригоди', 'хоробрість', 'класика']
),
(
  'Тисяча пам''ятних поцілунків',
  'Тіллі Коул',
  'Підліткова література',
  'Зворушлива історія першого кохання й утрати. Роман про підліткове кохання та важкі випробування.',
  'Зворушлива історія першого кохання й утрати.',
  '978-617-548-105-9',
  384,
  '16+',
  'BookChef',
  2022,
  'available',
  true,
  0,
  0,
  ARRAY['Роман', 'Серйозне'],
  ARRAY['кохання', 'утрата', 'підлітки', 'роман', 'емоції']
),
(
  'Кафе на краю світу',
  'Джон П. Стрелекі',
  'Психологія та розвиток',
  'Алегорична притча про пошук сенсу життя у «кафе чому?». Філософська книга про саморозвиток та пошук мети.',
  'Алегорична притча про пошук сенсу життя у «кафе чому?».',
  '978-966-982-061-7',
  128,
  '16+',
  'Vivat',
  2019,
  'available',
  true,
  0,
  0,
  ARRAY['Філософія', 'Саморозвиток'],
  ARRAY['кафе', 'сенс життя', 'філософія', 'саморозвиток', 'притча']
),
(
  'Матильда',
  'Роальд Дал',
  'Дитяча література',
  'Геніальна дівчинка Матильда проти батьків-невігласів та тиранії міс Транчбул. Класична історія про розум та справедливість.',
  'Геніальна дівчинка Матильда проти батьків-невігласів та тиранії міс Транчбул.',
  '978-966-7047-64-1',
  272,
  '7-12',
  'А-ба-ба-га-ла-ма-га',
  2006,
  'available',
  true,
  0,
  0,
  ARRAY['Класика', 'Світова література'],
  ARRAY['матильда', 'розум', 'справедливість', 'школа', 'класика']
),
(
  'Бажання',
  'Барбара О''Коннор',
  'Дитяча література',
  'Дівчинка Чарлі вчиться знаходити родину та підтримку, про які мріяла. Тепла історія про сім''ю та дружбу.',
  'Дівчинка Чарлі вчиться знаходити родину та підтримку, про які мріяла.',
  '978-617-548-345-9',
  208,
  '9-12',
  'BookChef',
  2025,
  'available',
  true,
  0,
  0,
  ARRAY['Нове', 'Тепле'],
  ARRAY['сім''я', 'дружба', 'мрії', 'діти', 'тепло']
),
(
  'Стейсі у пошуках щастя',
  'Олександра Гнелецька',
  'Книжки-картинки',
  'Історія Стейсі про пошук власного щастя. Книжка-картинка про те, як знайти щастя в собі.',
  'Історія Стейсі про пошук власного щастя.',
  '978-617-8316-00-6',
  NULL,
  '6-8',
  'HNELETSKA STUDIO',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Повчальне', 'Щастя'],
  ARRAY['щастя', 'пошук', 'малята', 'психологія', 'самопізнання']
);

-- Обновляем search_vector для всех новых книг из CSV
UPDATE books SET 
  search_text = COALESCE(title, '') || ' ' || 
                COALESCE(author, '') || ' ' || 
                COALESCE(category, '') || ' ' || 
                COALESCE(description, '') || ' ' ||
                COALESCE(array_to_string(tags, ' '), ''),
  search_vector = to_tsvector('simple', 
    COALESCE(title, '') || ' ' || 
    COALESCE(author, '') || ' ' || 
    COALESCE(category, '') || ' ' ||
    COALESCE(description, '') || ' ' ||
    COALESCE(array_to_string(tags, ' '), '')
  )
WHERE title IN (
  'Ким хотіла бути Панда?',
  'Крижане серце. Магічна колекція',
  'Крижане серце 2. Магічна колекція',
  'Чудове Чудовисько. Книга 1',
  'Гармидер у школі',
  'Чарлі і шоколадна фабрика',
  'Джуді Муді. Книга 1',
  'Бодьо в селі',
  'Енн із Зелених Дахів',
  'Міо, мій Міо',
  'Тисяча пам''ятних поцілунків',
  'Кафе на краю світу',
  'Матильда',
  'Бажання',
  'Стейсі у пошуках щастя'
);
