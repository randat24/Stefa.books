# üìö –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ï –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –∫–Ω–∏–≥

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

–û—à–∏–±–∫–∏ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã

```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor
\i check_and_fix_books_table.sql
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ü–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã `books`
- –î–æ–±–∞–≤–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ (`age_range`, `short_description`, `qty_total`, `qty_available`, `price_uah`, `location`)

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–Ω–∏–≥–∏

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–±–µ–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫)
```sql
\i fixed_books_loader.sql
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ–ª–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (—Å–æ –≤—Å–µ–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏)
```sql
\i complete_books_loader.sql
```

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

| –°–∫—Ä–∏–ø—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|--------|----------|-------------------|
| `check_and_fix_books_table.sql` | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã | **–°–Ω–∞—á–∞–ª–∞ –≤—Å–µ–≥–¥–∞** |
| `fixed_books_loader.sql` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–Ω–∏–≥–∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ | –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ |
| `complete_books_loader.sql` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–Ω–∏–≥–∏ —Å–æ –≤—Å–µ–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏ | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã |
| `smart_books_loader.sql` | –£–º–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ | –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–£–±—Ä–∞–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏**:
   - `age_category_id` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `age_range` (—Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã**:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–æ–ª–æ–Ω–æ–∫
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ

3. **–°–æ–∑–¥–∞–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã**:
   - `fixed_books_loader.sql` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
   - `complete_books_loader.sql` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
- `author` - –ê–≤—Ç–æ—Ä  
- `isbn` - ISBN –∫–æ–¥
- `code` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∫–Ω–∏–≥–∏ (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:
- `description` - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- `cover_url` - URL –æ–±–ª–æ–∂–∫–∏
- `category_id` - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
- `available` - –î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –∫–Ω–∏–≥–∞
- `pages` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü
- `language` - –Ø–∑—ã–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 'uk')
- `publisher` - –ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ
- `publication_year` - –ì–æ–¥ –∏–∑–¥–∞–Ω–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
- `age_range` - –í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- `short_description` - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- `qty_total` - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- `qty_available` - –î–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `price_uah` - –¶–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏ –≤ –≥—Ä–∏–≤–Ω–∞—Ö
- `location` - –ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- `tags` - –¢–µ–≥–∏ (–º–∞—Å—Å–∏–≤)
- `badges` - –ó–Ω–∞—á–∫–∏ (–º–∞—Å—Å–∏–≤)
- `status` - –°—Ç–∞—Ç—É—Å –∫–Ω–∏–≥–∏

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É**:
   ```sql
   \i check_and_fix_books_table.sql
   ```

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–Ω–∏–≥–∏**:
   ```sql
   \i complete_books_loader.sql
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   ```sql
   SELECT COUNT(*) FROM public.books;
   SELECT title, author, code FROM public.books LIMIT 5;
   ```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```sql
-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT 
    COUNT(*) as total_books,
    COUNT(CASE WHEN available = true THEN 1 END) as available_books,
    COUNT(DISTINCT category_id) as categories_with_books,
    COUNT(DISTINCT author) as unique_authors
FROM public.books;

-- –ö–Ω–∏–≥–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
SELECT 
    c.name as category,
    COUNT(b.id) as books_count
FROM public.categories c
LEFT JOIN public.books b ON c.id = b.category_id
WHERE c.parent_id IS NOT NULL
GROUP BY c.name
ORDER BY books_count DESC;

-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏
SELECT 
    title,
    author,
    code,
    age_range,
    available,
    created_at
FROM public.books
ORDER BY created_at DESC
LIMIT 10;
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `check_and_fix_books_table.sql`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `fixed_books_loader.sql` (–±–µ–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫)

### –ï—Å–ª–∏ –∫–Ω–∏–≥–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ISBN –∫–æ–¥—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase

### –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `categories` –µ—Å—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (`parent_id IS NOT NULL`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã (`is_active = true`)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `check_and_fix_books_table.sql` –∏ –ø–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã `books`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã

---

**–¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫! üéâüìö**
