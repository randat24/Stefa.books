# üìö –ó–∞–≥—Ä—É–∑–∫–∞ 105 –∫–Ω–∏–≥ –∏–∑ Google Sheets

## üéØ –¶–µ–ª—å

–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ 105 –∫–Ω–∏–≥ –∏–∑ Google Sheets –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Stefa.Books.

## üöÄ –°–ø–æ—Å–æ–±—ã –∑–∞–≥—Ä—É–∑–∫–∏

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ Node.js (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install googleapis @supabase/supabase-js
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# Google Sheets
export GOOGLE_SHEET_ID="your_spreadsheet_id"
export GOOGLE_SERVICE_ACCOUNT_KEY_FILE="./google-service-account.json"

# Supabase
export NEXT_PUBLIC_SUPABASE_URL="your_supabase_url"
export SUPABASE_SERVICE_ROLE_KEY="your_service_role_key"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
export DRY_RUN="false"  # true –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

#### 3. –°–æ–∑–¥–∞–π—Ç–µ Service Account:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ Google Sheets API
4. –°–æ–∑–¥–∞–π—Ç–µ Service Account
5. –°–∫–∞—á–∞–π—Ç–µ JSON –∫–ª—é—á
6. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ç–∞–±–ª–∏—Ü–µ–π —Å email Service Account

#### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
node load_105_books.js
```

### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ SQL

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Google Sheets:
–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
- `–ù–∞–∑–≤–∞` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
- `–ê–≤—Ç–æ—Ä` - –ê–≤—Ç–æ—Ä
- `ISBN` - ISBN –∫–æ–¥
- `–û–ø–∏—Å` - –û–ø–∏—Å–∞–Ω–∏–µ
- `–û–±–∫–ª–∞–¥–∏–Ω–∫–∞` - URL –æ–±–ª–æ–∂–∫–∏
- `–ö–∞—Ç–µ–≥–æ—Ä—ñ—è` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ü—Ä–∏–≥–æ–¥–∏, –º–æ–ª–æ–¥—à–∏–π –≤—ñ–∫")
- `–î–æ—Å—Ç—É–ø–Ω–∞` - –î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –∫–Ω–∏–≥–∞ (—Ç–∞–∫/–Ω—ñ)

#### 2. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ CSV:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Google Sheets
2. –§–∞–π–ª ‚Üí –°–∫–∞—á–∞—Ç—å ‚Üí CSV
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ `books.csv`

#### 3. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ CSV –≤ SQL:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `convert_csv_to_sql.js`

#### 4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL:
```sql
\i mass_books_loader.sql
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
- `author` - –ê–≤—Ç–æ—Ä
- `isbn` - ISBN –∫–æ–¥ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `description` - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- `cover_url` - URL –æ–±–ª–æ–∂–∫–∏ –≤ Cloudinary
- `category` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ü—Ä–∏–≥–æ–¥–∏, –º–æ–ª–æ–¥—à–∏–π –≤—ñ–∫")
- `available` - –î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –∫–Ω–∏–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ:
- `code` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∫–Ω–∏–≥–∏ (SB-2025-0001, SB-2025-0002, ...)
- `category_id` - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:

| –ù–∞–∑–≤–∞ | –ê–≤—Ç–æ—Ä | ISBN | –û–ø–∏—Å | –û–±–∫–ª–∞–¥–∏–Ω–∫–∞ | –ö–∞—Ç–µ–≥–æ—Ä—ñ—è | –î–æ—Å—Ç—É–ø–Ω–∞ |
|-------|-------|------|------|------------|-----------|----------|
| –ü—Ä–∏–≥–æ–¥–∏ –¢–æ–º–∞ –°–æ–π—î—Ä–∞ | –ú–∞—Ä–∫ –¢–≤–µ–Ω | 978-617-12-3456-7 | –ö–ª–∞—Å–∏—á–Ω–∏–π —Ä–æ–º–∞–Ω... | https://... | –ü—Ä–∏–≥–æ–¥–∏, –º–æ–ª–æ–¥—à–∏–π –≤—ñ–∫ | —Ç–∞–∫ |
| –ê–ª—ñ—Å–∞ –≤ –ö—Ä–∞—ó–Ω—ñ –ß—É–¥–µ—Å | –õ—å—é—ó—Å –ö–µ—Ä—Ä–æ–ª–ª | 978-617-12-3457-4 | –ö–∞–∑–∫–æ–≤–∞ —ñ—Å—Ç–æ—Ä—ñ—è... | https://... | –ö–∞–∑–∫–∏, –¥–æ—à–∫—ñ–ª—å–Ω–∏–π –≤—ñ–∫ | —Ç–∞–∫ |

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ—Å—Ç—É–ø:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Google Sheets
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" ‚Üí "–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö, —É –∫–æ–≥–æ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã –∏–∑ URL

## üìä –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–Ω–∏–≥

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º:

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
- **–ü—Ä–∏–≥–æ–¥–∏** - –ø—Ä–∏–∫–ª—é—á–µ–Ω—á–µ—Å–∫–∏–µ –∫–Ω–∏–≥–∏
- **–ö–∞–∑–∫–∏** - —Å–∫–∞–∑–∫–∏ –∏ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞
- **–§–µ–Ω—Ç–µ–∑—ñ** - —Ñ—ç–Ω—Ç–µ–∑–∏
- **–î–µ—Ç–µ–∫—Ç–∏–≤** - –¥–µ—Ç–µ–∫—Ç–∏–≤—ã
- **–ü—Å–∏—Ö–æ–ª–æ–≥—ñ—è —ñ —Å–∞–º–æ—Ä–æ–∑–≤–∏—Ç–æ–∫** - –ø—Å–∏—Ö–æ–ª–æ–≥–∏—è
- **–ü—ñ–∑–Ω–∞–≤–∞–ª—å–Ω—ñ** - –ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å–Ω—ã–µ
- **–°—É—á–∞—Å–Ω–∞ –ø—Ä–æ–∑–∞** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–∑–∞

### –í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
- **–î–æ—à–∫—ñ–ª—å–Ω–∏–π –≤—ñ–∫** - 3-6 –ª–µ—Ç
- **–ú–æ–ª–æ–¥—à–∏–π –≤—ñ–∫** - 6-12 –ª–µ—Ç
- **–°–µ—Ä–µ–¥–Ω—ñ–π –≤—ñ–∫** - 12-16 –ª–µ—Ç
- **–ü—ñ–¥–ª—ñ—Ç–∫–æ–≤–∏–π –≤—ñ–∫** - 14+ –ª–µ—Ç

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT 
    COUNT(*) as total_books,
    COUNT(CASE WHEN available = true THEN 1 END) as available_books,
    COUNT(DISTINCT author) as unique_authors,
    COUNT(DISTINCT category_id) as categories_with_books
FROM public.books;

-- –ö–Ω–∏–≥–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
SELECT 
    c.name as category,
    COUNT(b.id) as books_count
FROM public.categories c
LEFT JOIN public.books b ON c.id = b.category_id
WHERE c.parent_id IS NOT NULL
GROUP BY c.name
ORDER BY books_count DESC;

-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏
SELECT 
    title,
    author,
    code,
    available,
    created_at
FROM public.books
ORDER BY created_at DESC
LIMIT 20;
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å**: –ö–Ω–∏–≥–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ ISBN –∏ –∫–æ–¥—É
2. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
3. **–ö–æ–¥—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `SB-YYYY-NNNN`
4. **–û–±–ª–æ–∂–∫–∏**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Cloudinary –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
5. **–ë–∞—Ç—á–∏**: –ö–Ω–∏–≥–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–∞—Ç—á–∞–º–∏ –ø–æ 20 —à—Ç—É–∫ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Google Sheets:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª Service Account
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è Service Account
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Supabase
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase

### –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Google Sheets
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É —Ñ–∞–π–ª–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`DRY_RUN=true`)

---

**–£–¥–∞—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ 105 –∫–Ω–∏–≥! üìö‚ú®**
