# üîí –ë–ï–ó–ü–ï–ö–ê –ü–†–û–ï–ö–¢–£ STEFA.BOOKS

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û - –ü–µ—Ä–µ–¥ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è–º

### 1. –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (.env —Ñ–∞–π–ª–∏)

**‚ùå –ù–ï –†–û–ë–ò–¢–ò:**
- –ù–µ –∫–æ–º—ñ—Ç—å—Ç–µ —Ñ–∞–π–ª `.env.local` –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏
- –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ñ/–¥–µ—Ñ–æ–ª—Ç–Ω—ñ –∫–ª—é—á—ñ —É –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ
- –ù–µ –∑–∞–ª–∏—à–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ñ API –∫–ª—é—á—ñ –≤ `.env.local.example`

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ .env.local.example —è–∫ —à–∞–±–ª–æ–Ω
cp .env.local.examle .env.local

# –ó–∞–º—ñ–Ω—ñ—Ç—å –≤—Å—ñ YOUR_* –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
CLOUDINARY_API_SECRET="your-real-secret"
ADMIN_JWT_SECRET="generate-strong-jwt-secret"
```

### 2. Cloudinary –±–µ–∑–ø–µ–∫–∞

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Upload Preset:**
1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ [Cloudinary Console](https://cloudinary.com/console)
2. Settings ‚Üí Upload ‚Üí Add upload preset
3. –°—Ç–≤–æ—Ä—ñ—Ç—å preset `stefa_books_upload`:
   - **Signing Mode**: Unsigned
   - **Folder**: `stefa-books/screenshots`
   - **Max file size**: 5MB
   - **Allowed formats**: jpg,png,jpeg,webp

### 3. Supabase RLS (Row Level Security)

**‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –í—Å—ñ —Ç–∞–±–ª–∏—Ü—ñ –º–∞—é—Ç—å —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π RLS
- –ü—É–±–ª—ñ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø —Ç—ñ–ª—å–∫–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥—É –∫–Ω–∏–≥
- –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –∑–∞—Ö–∏—â–µ–Ω—ñ

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ RLS:**
```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å RLS
SELECT schemaname, tablename, rowsecurity 
FROM pg_tables 
WHERE schemaname = 'public';
```

### 4. Next.js Security Headers

**–ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –≤ `next.config.js`:**
```javascript
// –ó–∞—Ö–∏—Å–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏
headers: [
  { key: 'X-Frame-Options', value: 'DENY' },
  { key: 'X-Content-Type-Options', value: 'nosniff' },
  { key: 'Referrer-Policy', value: 'strict-origin-when-cross-origin' }
]
```

### 5. –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ middleware:**
- Development: –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –¥–æ—Å—Ç—É–ø –Ω–∞ localhost
- Production: JWT —Ç–æ–∫–µ–Ω –≤ cookie `admin_token`

**–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è JWT —Å–µ–∫—Ä–µ—Ç—É:**
```bash
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

## üö® –í–∏—è–≤–ª–µ–Ω—ñ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ (–í–ò–ü–†–ê–í–õ–ï–ù–û)

### ‚úÖ –•–∞—Ä–¥–∫–æ–¥ URL-—ñ–≤ - –í–ò–ü–†–ê–í–õ–ï–ù–û
- **–ë—É–ª–æ**: `'https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/image/upload'`
- **–°—Ç–∞–ª–æ**: `process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME`

### ‚úÖ –í—ñ–¥–∫—Ä–∏—Ç—ñ API –∫–ª—é—á—ñ - –ó–ê–•–ò–©–ï–ù–û
- –†–µ–∞–ª—å–Ω—ñ –∫–ª—é—á—ñ –ø–µ—Ä–µ–º—ñ—â–µ–Ω—ñ –∑ `.env.local.examle`
- –°—Ç–≤–æ—Ä–µ–Ω–æ –±–µ–∑–ø–µ—á–Ω–∏–π —à–∞–±–ª–æ–Ω –∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏

## üìã –ß–µ–∫–ª–∏—Å—Ç –±–µ–∑–ø–µ–∫–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º

- [ ] –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ –Ω–æ–≤—ñ JWT —Å–µ–∫—Ä–µ—Ç–∏
- [ ] –ó–∞–º—ñ–Ω–µ–Ω–æ –≤—Å—ñ —Ç–µ—Å—Ç–æ–≤—ñ API –∫–ª—é—á—ñ
- [ ] –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ Cloudinary upload presets
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏ –≤ Supabase
- [ ] –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ HTTPS –¥–æ–º–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
- [ ] –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ CORS –¥–ª—è API endpoints
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏

## üîê –†–µ–≥—É–ª—è—Ä–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è

### –©–æ–º—ñ—Å—è—Ü—è:
- –†–æ—Ç–∞—Ü—ñ—è API –∫–ª—é—á—ñ–≤ Cloudinary
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ –±–µ–∑–ø–µ–∫–∏ Supabase
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –∑ `npm audit`

### –©–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ:
- –ê—É–¥–∏—Ç RLS –ø–æ–ª—ñ—Ç–∏–∫
- –ü–µ—Ä–µ–≥–ª—è–¥ JWT —Ç–æ–∫–µ–Ω—ñ–≤
- Backup security –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —É –≤–∏–ø–∞–¥–∫—É —ñ–Ω—Ü–∏–¥–µ–Ω—Ç—É

**–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –±–µ–∑–ø–µ–∫–∏:** [–í–∞—à –∫–æ–Ω—Ç–∞–∫—Ç]
**Incident Response:** [–ü–ª–∞–Ω –¥—ñ–π –ø—Ä–∏ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç—ñ]

---
*–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: 28.08.2025*
*–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç—É: 1.0*