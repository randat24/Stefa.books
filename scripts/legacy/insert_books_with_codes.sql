-- Вставка книг с обязательным полем code
-- Создано: 2025-01-27

-- Сначала добавим категории, если их нет
INSERT INTO categories (name, description, display_order) VALUES
('Підліткова література', 'Книги для підлітків 12-16 років', 1),
('Дитяча література', 'Книги для дітей 3-12 років', 2),
('Книжки-картинки', 'Ілюстровані книги для малят', 3),
('Класична література', 'Класичні твори української та світової літератури', 4),
('Науково-популярна література', 'Пізнавальні книги для дітей', 5),
('Фентезі та пригоди', 'Фантастичні та пригодницькі книги', 6),
('Психологія та розвиток', 'Книги про емоції та розвиток', 7),
('Історична література', 'Книги про історію України та світу', 8)
ON CONFLICT (name) DO NOTHING;

-- Вставка книг с кодами
INSERT INTO books (
  code,
  title, 
  author, 
  category, 
  description, 
  short_description,
  isbn, 
  pages, 
  age_range, 
  publisher, 
  publication_year,
  status,
  available,
  rating,
  rating_count,
  badges,
  tags
) VALUES
-- Книги из вашего списка
(
  'PL-001',
  'Статистична імовірність любові з першого погляду',
  'Дженніфер Е. Сміт',
  'Підліткова література',
  'Підлітковий роман про випадкову зустріч в аеропорту, що змінює все. Історія про кохання, випадковість та те, як одне мить може змінити все життя.',
  'Підлітковий роман про випадкову зустріч в аеропорту, що змінює все.',
  '978-966-448-410-4',
  248,
  '14+',
  'Видавництво Старого Лева',
  2025,
  'available',
  true,
  0,
  0,
  ARRAY['Нове', 'Популярне'],
  ARRAY['роман', 'підлітки', 'кохання', 'пригоди']
),
(
  'PL-002',
  'Космос, прийом',
  'Марк Лівін',
  'Підліткова література',
  'Камінг-оф-ейдж про пошуки батька й власного голосу. Історія про дорослішання, самопізнання та пошук своєї ідентичності.',
  'Камінг-оф-ейдж про пошуки батька й власного голосу.',
  '9789669827630',
  240,
  '14+',
  'Vivat',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Популярне'],
  ARRAY['роман', 'підлітки', 'дорослішання', 'сім''я']
),
(
  'PL-003',
  'Нездатні',
  'Мартін Р. Роше',
  'Підліткова література',
  'Психологічна проза про «право на помилку» в сучасному суспільстві. Глибокий розгляд проблем сучасної молоді та їх боротьби з очікуваннями.',
  'Психологічна проза про «право на помилку» в сучасному суспільстві.',
  '9789669826992',
  272,
  '16+',
  'Vivat',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Серйозне'],
  ARRAY['психологія', 'підлітки', 'суспільство', 'помилки']
),
(
  'NP-001',
  'Знамениті також закохуються',
  'Кірсті Крістофферсен',
  'Науково-популярна література',
  'Популярний нон-фікшн про приватне життя відомих постатей у форматі коротких замальовок. Цікаві факти про особисте життя знаменитостей.',
  'Популярний нон-фікшн про приватне життя відомих постатей у форматі коротких замальовок.',
  NULL,
  96,
  '12+',
  'ВСЛ',
  2022,
  'available',
  true,
  0,
  0,
  ARRAY['Цікаве'],
  ARRAY['біографії', 'знаменитості', 'історії', 'факти']
),
(
  'KL-001',
  'Південь',
  'Леа Коен',
  'Класична література',
  'Сімейна сага на тлі історичних зламів. Епічна історія сім''ї через покоління, що показує як історичні події впливають на долі людей.',
  'Сімейна сага на тлі історичних зламів.',
  '9786178111776',
  336,
  '16+',
  'Наш Формат',
  2024,
  'available',
  true,
  0,
  0,
  ARRAY['Серйозне', 'Класика'],
  ARRAY['сага', 'сім''я', 'історія', 'покоління']
),
(
  'DL-001',
  'Лицар-дракон. Вогонь! (кн. 1)',
  'Кайл Мʼюбьорн',
  'Дитяча література',
  'Кумедне фентезі для молодших читачів. Пригоди юного лицаря-дракона, який навчається бути героєм.',
  'Кумедне фентезі для молодших читачів.',
  '9786177682239',
  96,
  '6-10',
  'Vivat',
  2019,
  'available',
  true,
  0,
  0,
  ARRAY['Веселе', 'Серія'],
  ARRAY['фентезі', 'пригоди', 'лицар', 'дракон', 'діти']
),
(
  'DL-002',
  'Лицар-дракон. Турнір (кн. 2)',
  'Кайл Мʼюбьорн',
  'Дитяча література',
  'Продовження пригод юного «лицаря-дракона». Друга частина серії про смішні пригоди героя.',
  'Продовження пригод юного «лицаря-дракона».',
  '9786177685315',
  96,
  '6-10',
  'Vivat',
  2019,
  'available',
  true,
  0,
  0,
  ARRAY['Веселе', 'Серія'],
  ARRAY['фентезі', 'пригоди', 'лицар', 'дракон', 'діти']
),
(
  'KP-001',
  'Загубився тигр! (серія «Я вже читаю»)',
  'Катажина Шестак',
  'Книжки-картинки',
  'Перший самостійний читач: яскрава історія-пригода. Книга для початківців читання з великими буквами та цікавими пригодами.',
  'Перший самостійний читач: яскрава історія-пригода.',
  '9786170982421',
  48,
  '5-8',
  'Ранок',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Для початківців', 'Серія'],
  ARRAY['читання', 'пригоди', 'тигр', 'діти', 'навчання']
),
(
  'DL-003',
  'Неймовірна історія про велет-грушку',
  'Якоб Мартін Стрід',
  'Дитяча література',
  'Авантюрна казка з упізнаваною графікою. Весела історія про величезну грушу та її пригоди.',
  'Авантюрна казка з упізнаваною графікою.',
  '9786170963253',
  160,
  '6-10',
  'Ранок',
  2019,
  'available',
  true,
  0,
  0,
  ARRAY['Веселе', 'Казка'],
  ARRAY['казка', 'пригоди', 'груша', 'діти', 'фантазія']
),
(
  'KP-002',
  'Лама Лама і його мама',
  'Анна Д''юдні',
  'Книжки-картинки',
  'Теплі історії про маму й ламеня. Серія книг про сімейні стосунки та любов між мамою та дитиною.',
  'Теплі історії про маму й ламеня.',
  '9786178253875',
  96,
  '3-6',
  'Vivat',
  2022,
  'available',
  true,
  0,
  0,
  ARRAY['Тепле', 'Серія'],
  ARRAY['сім''я', 'мама', 'дитина', 'любов', 'малята']
),
(
  'KP-003',
  'Дві білки і шишка з гілки',
  'Рейчел Брайт',
  'Книжки-картинки',
  'Кумедна притча про співпрацю замість змагання. Історія про те, як краще працювати разом, ніж змагатися.',
  'Кумедна притча про співпрацю замість змагання.',
  '9789669821973',
  32,
  '3-6',
  'Vivat',
  2021,
  'available',
  true,
  0,
  0,
  ARRAY['Повчальне', 'Веселе'],
  ARRAY['притча', 'співпраця', 'білки', 'дружба', 'малята']
),
(
  'DL-004',
  'Яйце. Друзяки-динозаврики',
  'Ларс Меле',
  'Дитяча література',
  'Подорож друзів-динозавриків до великої події. Пригоди милих динозавриків, які разом вирушають у подорож.',
  'Подорож друзів-динозавриків до великої події.',
  '9786170977014',
  48,
  '4-8',
  'Ранок',
  2022,
  'available',
  true,
  0,
  0,
  ARRAY['Веселе', 'Дружба'],
  ARRAY['динозаври', 'дружба', 'подорож', 'діти', 'пригоди']
),
(
  'DL-005',
  'Чудове Чудовисько. В країні жаховиськ (кн. 2)',
  'Сашко Дерманський',
  'Дитяча література',
  'Друга частина шаленої трилогії про Соню і Чу. Продовження пригод дівчинки та її незвичайного друга.',
  'Друга частина шаленої трилогії про Соню і Чу.',
  '9786175850015',
  288,
  '7-12',
  'А-ба-ба-га-ла-ма-га',
  2021,
  'available',
  true,
  0,
  0,
  ARRAY['Серія', 'Фентезі'],
  ARRAY['фентезі', 'пригоди', 'дружба', 'діти', 'трилогія']
),
(
  'IL-001',
  'Українознавці: Україна. Від первісних часів до сьогодення',
  'Сергій Жуков, Марія Тахтаулова',
  'Історична література',
  'Ілюстрований гід з історії України для дітей. Повна історія нашої країни у зрозумілому для дітей форматі.',
  'Ілюстрований гід з історії України для дітей.',
  '978-617-09-8655-9',
  104,
  '8-14',
  'Ранок',
  2024,
  'available',
  true,
  0,
  0,
  ARRAY['Освітнє', 'Історія'],
  ARRAY['історія', 'Україна', 'освіта', 'діти', 'пізнавальне']
),
(
  'DL-006',
  'Мортіна і Таємниче озеро',
  'Барбара Кантіні',
  'Дитяча література',
  'Готично-кумедні канікули Мортіни. Пригоди маленької дівчинки-скелета у таємничому озері.',
  'Готично-кумедні канікули Мортіни.',
  '9789669178060',
  80,
  '6-10',
  'Рідна Мова',
  2024,
  'available',
  true,
  0,
  0,
  ARRAY['Веселе', 'Готика'],
  ARRAY['пригоди', 'скелет', 'озеро', 'діти', 'таємниця']
),
(
  'DL-007',
  'Роб і Джонні. Книга 1',
  'Елізабет Метіс',
  'Дитяча література',
  'Дружба, пригоди й трошки шаленства. Історія про двох друзів та їх неймовірні пригоди.',
  'Дружба, пригоди й трошки шаленства.',
  '9786178071018',
  96,
  '6-10',
  'Talantbooks',
  2024,
  'available',
  true,
  0,
  0,
  ARRAY['Дружба', 'Пригоди'],
  ARRAY['дружба', 'пригоди', 'діти', 'шаленство', 'веселощі']
),
(
  'KL-002',
  'Притчі. Мудрість поколінь',
  'упоряд. ІРІО (IPIO)',
  'Класична література',
  'Збірка повчальних історій для дорослих і підлітків. Мудрі притчі, які передають мудрість поколінь.',
  'Збірка повчальних історій для дорослих і підлітків.',
  '978-617-7754-52-6',
  240,
  '12+',
  'ІРІО',
  2023,
  'available',
  true,
  0,
  0,
  ARRAY['Мудрість', 'Класика'],
  ARRAY['притчі', 'мудрість', 'повчання', 'покоління', 'філософія']
),
(
  'DL-008',
  'Осінь на Бузиновій вулиці',
  'Чорні Вівці',
  'Дитяча література',
  'Теплі дворикові історії про дружбу та будні. Серія оповідань про життя дітей на одній вулиці.',
  'Теплі дворикові історії про дружбу та будні.',
  '9789669820549',
  64,
  '6-10',
  'Чорні Вівці',
  2019,
  'available',
  true,
  0,
  0,
  ARRAY['Тепле', 'Серія'],
  ARRAY['дружба', 'дворик', 'діти', 'будні', 'тепло']
),
(
  'NP-002',
  'Швидка допомога для дітей',
  'Масахіко Сакамото',
  'Науково-популярна література',
  'Проста енциклопедія першої допомоги для дітей і батьків. Навчальна книга про те, як надати першу допомогу.',
  'Проста енциклопедія першої допомоги для дітей і батьків.',
  '978-617-7913-23-7',
  48,
  '7+',
  'Mamino',
  2024,
  'available',
  true,
  0,
  0,
  ARRAY['Освітнє', 'Корисне'],
  ARRAY['перша допомога', 'освіта', 'безпека', 'діти', 'корисне']
),
(
  'PD-001',
  'У нас завівся невидимий тигр',
  'Катерина Єгорукіна',
  'Психологія та розвиток',
  'Історія про тривогу переїзду та «уявного друга». Книга допомагає дітям розуміти та подолати тривожність.',
  'Історія про тривогу переїзду та «уявного друга».',
  '9786171709157',
  48,
  '5-8',
  'Vivat',
  2025,
  'available',
  true,
  0,
  0,
  ARRAY['Психологія', 'Допомога'],
  ARRAY['тривога', 'переїзд', 'психологія', 'діти', 'емоції']
),
(
  'DL-009',
  'Клуб нових робінзонів',
  'Ґійом Деланной',
  'Дитяча література',
  'Сучасний «робінзонад» для юних дослідників. Пригоди сучасних дітей, які навчаються виживати в природі.',
  'Сучасний «робінзонад» для юних дослідників.',
  NULL,
  NULL,
  '8-12',
  'ВСЛ',
  2025,
  'available',
  true,
  0,
  0,
  ARRAY['Пригоди', 'Навчання'],
  ARRAY['робінзонад', 'природа', 'виживання', 'дослідження', 'діти']
);

-- Обновляем search_vector для всех новых книг
UPDATE books SET 
  search_text = COALESCE(title, '') || ' ' || 
                COALESCE(author, '') || ' ' || 
                COALESCE(category, '') || ' ' || 
                COALESCE(description, '') || ' ' ||
                COALESCE(array_to_string(tags, ' '), ''),
  search_vector = to_tsvector('simple', 
    COALESCE(title, '') || ' ' || 
    COALESCE(author, '') || ' ' || 
    COALESCE(category, '') || ' ' ||
    COALESCE(description, '') || ' ' ||
    COALESCE(array_to_string(tags, ' '), '')
  )
WHERE code IN (
  'PL-001', 'PL-002', 'PL-003', 'NP-001', 'KL-001', 'DL-001', 'DL-002', 
  'KP-001', 'DL-003', 'KP-002', 'KP-003', 'DL-004', 'DL-005', 'IL-001', 
  'DL-006', 'DL-007', 'KL-002', 'DL-008', 'NP-002', 'PD-001', 'DL-009'
);
