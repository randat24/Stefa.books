# üë• –û—Ç—á–µ—Ç –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Stefa.Books

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 7 –≤–µ—Ä–µ—Å–Ω—è 2025  
**–í—Ä–µ–º—è**: 19:15 UTC  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã

## üéØ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### 1. –ì–æ–ª–æ–≤–Ω–∏–π –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä
- **Email**: admin@stefa-books.com.ua
- **–ò–º—è**: –ì–æ–ª–æ–≤–Ω–∏–π –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä
- **–†–æ–ª—å**: admin
- **–¢–µ–ª–µ—Ñ–æ–Ω**: +38 (063) 856-54-14
- **–ü–æ–¥–ø–∏—Å–∫–∞**: premium
- **–°—Ç–∞—Ç—É—Å**: active
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏—è**: –ì–æ–ª–æ–≤–Ω–∏–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º–∏ Stefa.Books
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

### 2. –ê–Ω–∞—Å—Ç–∞—Å—ñ—è
- **Email**: anastasia@stefa-books.com.ua
- **–ò–º—è**: –ê–Ω–∞—Å—Ç–∞—Å—ñ—è
- **–†–æ–ª—å**: admin
- **–¢–µ–ª–µ—Ñ–æ–Ω**: +38 (050) 123-45-67
- **–ü–æ–¥–ø–∏—Å–∫–∞**: premium
- **–°—Ç–∞—Ç—É—Å**: active
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏—è**: –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º–∏ Stefa.Books
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–∑–¥–∞–Ω

### 3. –†–æ–∑—Ä–æ–±–Ω–∏–∫
- **Email**: randat24@gmail.com
- **–ò–º—è**: –†–æ–∑—Ä–æ–±–Ω–∏–∫
- **–†–æ–ª—å**: admin
- **–¢–µ–ª–µ—Ñ–æ–Ω**: +38 (067) 987-65-43
- **–ü–æ–¥–ø–∏—Å–∫–∞**: premium
- **–°—Ç–∞—Ç—É—Å**: active
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏—è**: –†–æ–∑—Ä–æ–±–Ω–∏–∫ —Ç–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç—É Stefa.Books
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–∑–¥–∞–Ω

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: 3
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤**: 3 (100%)
- **–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: 3 (100%)
- **–û–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: 0

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **admin**: 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **user**: 0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **active**: 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **inactive**: 0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### 1. Node.js API —Å–∫—Ä–∏–ø—Ç
- **–§–∞–π–ª**: `create_users_via_api.mjs`
- **–ú–µ—Ç–æ–¥**: Supabase Service Role Key
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –£—Å–ø–µ—à–Ω–æ

### 2. SQL —Å–∫—Ä–∏–ø—Ç (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π)
- **–§–∞–π–ª**: `create_users_final.sql`
- **–ú–µ—Ç–æ–¥**: –ü—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- **–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## ‚ö†Ô∏è –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: `infinite recursion detected in policy for relation "users"`
- **–í–ª–∏—è–Ω–∏–µ**: API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ anon key
- **–†–µ—à–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω–∏—Ç—å `fix_rls_users_policy.sql`

### –î–æ—Å—Ç—É–ø –∫ API
- **–õ–æ–∫–∞–ª—å–Ω–æ**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (—á–µ—Ä–µ–∑ service key)
- **–ü—Ä–æ–¥–∞–∫—à–Ω**: ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏–∑-–∑–∞ RLS)
- **URL**: https://stefa-books.com.ua/api/users

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏** –≤ Supabase Dashboard
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API** –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è RLS
1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é** –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å** —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
node check_site_database_connection.mjs

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
node create_users_via_api.mjs
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è RLS)
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl https://stefa-books.com.ua/api/users

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl https://stefa-books.com.ua/api/users?email=admin@stefa-books.com.ua
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- **–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: admin —Ä–æ–ª—å
- **–î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏**: –î–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏**: –î–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**: –î–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. **–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å 2FA** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å** –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## üìã –§–∞–π–ª—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `create_users_via_api.mjs` - Node.js —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `create_users_final.sql` - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `USERS_CREATION_REPORT.md` - –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ —Ç—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ!**

### –ß—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã 3 –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å
- ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã API
- ‚ö†Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

---

**–°–æ–∑–¥–∞–Ω–æ**: 7 –≤–µ—Ä–µ—Å–Ω—è 2025, 19:15 UTC  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase Dashboard
