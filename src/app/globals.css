@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		/* Цветовая система */
		--brand: #0B1220;
		--brand-light: #1e293b;
		--accent: #2563eb;
		--accent-light: #3b82f6;
		
		/* Фирменные цвета */
		--brand-yellow: #eab308;
		--brand-yellow-light: #facc15;
		--brand-yellow-dark: #ca8a04;
		
		/* Семантические цвета */
		--success: #10b981;
		--success-light: #d1fae5;
		--warning: #f59e0b;
		--warning-light: #fef3c7;
		--error: #ef4444;
		--error-light: #fee2e2;
		
		/* Нейтральные тона */
		--ink: #111827;
		--text: #1f2937;
		--text-muted: #6b7280;
		--text-light: #9ca3af;
		--line: rgba(0,0,0,0.08);
		--border: #e5e7eb;
		--surface: #f9fafb;
		--surface-hover: #f3f4f6;
	}

	* {
		box-sizing: border-box;
	}

	/* Улучшенная адаптивная типографическая система */
	html {
		/* Базовая настройка для rem единиц */
		font-size: 14px; /* Мобильные устройства (320px+) */
	}
	
	@media (min-width: 375px) {
		html { font-size: 15px; } /* Большие телефоны */
	}
	
	@media (min-width: 480px) {
		html { font-size: 15.5px; } /* Планшеты в портретной ориентации */
	}
	
	@media (min-width: 640px) {
		html { font-size: 16px; } /* Планшеты и небольшие экраны */
	}
	
	@media (min-width: 768px) {
		html { font-size: 16.5px; } /* Планшеты в альбомной ориентации */
	}
	
	@media (min-width: 1024px) {
		html { font-size: 17px; } /* Десктопы */
	}
	
	@media (min-width: 1280px) {
		html { font-size: 18px; } /* Большие экраны */
	}
	
	@media (min-width: 1536px) {
		html { font-size: 19px; } /* Очень большие экраны */
	}

	body { 
		margin: 0;
		padding: 0;
		line-height: 1.6;
		color: var(--text);
		font-family: "SF Pro Text", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		text-rendering: optimizeLegibility;
	}

	/* Плавний скролл */
	html { 
		scroll-behavior: smooth; 
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}

	/* Выделение текста - фирменный желтый */
	::selection {
		background-color: var(--brand-yellow);
		color: var(--brand);
	}
	
	::-moz-selection {
		background-color: var(--brand-yellow);
		color: var(--brand);
	}
}

/* Custom book grid breakpoints */
.books-grid {
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(1, 1fr);
}

@media (min-width: 640px) {
  .books-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 780px) {
  .books-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (min-width: 1020px) {
  .books-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (min-width: 1680px) {
  .books-grid {
    grid-template-columns: repeat(6, 1fr);
  }
}

/* ========================================================
   ИДЕАЛЬНАЯ ТИПОГРАФИКА ДЛЯ КНИЖНОГО САЙТА
   Оптимизировано для читателей на всех устройствах
   ======================================================== */

/* ПРАВИЛЬНАЯ ТИПОГРАФИЧЕСКАЯ СИСТЕМА ДЛЯ КНИЖНОГО САЙТА
   Основана на модульной шкале 1.25 (Major Third) - стандарт книжной типографики
   SF Pro Display для заголовков, SF Pro Text для основного текста */

.text-display {
  font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
  font-size: clamp(1.75rem, 4vw, 2.25rem) !important;  /* 28px-36px - улучшенная читабельность */
  line-height: 1.1 !important;
  font-weight: 700 !important;
  letter-spacing: -0.02em !important;
  text-rendering: optimizeLegibility !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  color: #111827 !important;
}

@media (prefers-color-scheme: dark) {
  .text-display { color: #F8FAFC !important; }
}

.text-h1 {
  font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
  font-size: clamp(1.5rem, 3vw, 1.875rem) !important;  /* 24px-30px - улучшенная читабельность */
  line-height: 1.2 !important;
  font-weight: 600 !important;
  letter-spacing: -0.015em !important;
  text-rendering: optimizeLegibility !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  color: #111827 !important;
}

@media (prefers-color-scheme: dark) {
  .text-h1 { color: #F1F5F9 !important; }
}

.text-h2 {
  font-family: "SF Pro Display", -apple-system, sans-serif !important;
  font-size: clamp(1.25rem, 2.5vw, 1.563rem) !important; /* 20px-25px */
  line-height: 1.3 !important;
  font-weight: 600 !important;
  letter-spacing: -0.01em !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-h2 { color: #E2E8F0 !important; }
}

.text-h3 {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(1rem, 2vw, 1.25rem) !important; /* 16px-20px */
  line-height: 1.4 !important;
  font-weight: 600 !important;
  letter-spacing: -0.005em !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-h3 { color: #CBD5E1 !important; }
}

.text-h4 {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.875rem, 1.5vw, 1rem) !important; /* 14px-16px */
  line-height: 1.45 !important;
  font-weight: 600 !important;
  letter-spacing: 0 !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-h4 { color: #94A3B8 !important; }
}

.text-h5 {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.8rem, 1.2vw, 0.875rem) !important; /* 12.8px-14px */
  line-height: 1.5 !important;
  font-weight: 600 !important;
  letter-spacing: 0.01em !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-h5 { color: #94A3B8 !important; }
}

.text-h6 {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.75rem, 1vw, 0.8rem) !important; /* 12px-12.8px */
  line-height: 1.5 !important;
  font-weight: 600 !important;
  letter-spacing: 0.01em !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-h6 { color: #94A3B8 !important; }
}

/* ОСНОВНОЙ ТЕКСТ С SF PRO TEXT ДЛЯ ЧИТАЕМОСТИ */
.text-readable {
  font-family: "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
  font-size: clamp(1rem, 1.3vw, 1.125rem) !important; /* 16px-18px - улучшенная читабельность */
  line-height: 1.8 !important;
  font-weight: 400 !important;
  letter-spacing: 0.005em !important;
  text-rendering: optimizeLegibility !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  color: #1F2937 !important;
  max-width: 70ch; /* Оптимальная длина строки для чтения */
}

@media (prefers-color-scheme: dark) {
  .text-readable { color: #D1D5DB !important; }
}

.text-body-lg {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(1.063rem, 1.5vw, 1.125rem) !important; /* 17px-18px */
  line-height: 1.65 !important;
  font-weight: 400 !important;
  letter-spacing: 0.005em !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-body-lg { color: #D1D5DB !important; }
}

.text-body {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.875rem, 1.1vw, 1rem) !important; /* 14px-16px */
  line-height: 1.6 !important;
  font-weight: 400 !important;
  letter-spacing: 0 !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-body { color: #D1D5DB !important; }
}

.text-body-sm {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.8rem, 0.9vw, 0.875rem) !important; /* 12.8px-14px */
  line-height: 1.55 !important;
  font-weight: 400 !important;
  letter-spacing: 0.005em !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-body-sm { color: #9CA3AF !important; }
}

.text-caption {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.7rem, 0.75vw, 0.75rem) !important; /* 11.2px-12px */
  line-height: 1.5 !important;
  font-weight: 500 !important;
  letter-spacing: 0.025em !important;
  text-rendering: optimizeLegibility !important;
  color: #6B7280 !important;
}

@media (prefers-color-scheme: dark) {
  .text-caption { color: #9CA3AF !important; }
}

/* ДОПОЛНИТЕЛЬНАЯ ОПТИМИЗАЦИЯ ДЛЯ МОБИЛЬНЫХ */
@media (max-width: 480px) {
  .text-display {
    letter-spacing: -0.025em !important;
    font-size: clamp(1.5rem, 5vw, 1.875rem) !important;
  }
  
  .text-h1 {
    letter-spacing: -0.02em !important;
    font-size: clamp(1.25rem, 4vw, 1.5rem) !important;
  }
  
  .text-readable {
    line-height: 1.85 !important;
    letter-spacing: 0.01em !important;
    font-size: clamp(0.9rem, 1.1vw, 1rem) !important;
  }
  
  .book-description {
    line-height: 1.8 !important;
    letter-spacing: 0.01em !important;
  }
}

/* ОПТИМИЗАЦИЯ ДЛЯ ПЛАНШЕТОВ */
@media (min-width: 481px) and (max-width: 768px) {
  .text-display {
    font-size: clamp(1.75rem, 4.5vw, 2rem) !important;
  }
  
  .text-readable {
    line-height: 1.75 !important;
    font-size: clamp(1rem, 1.2vw, 1.063rem) !important;
  }
}

/* ОПТИМИЗАЦИЯ ДЛЯ БОЛЬШИХ ЭКРАНОВ */
@media (min-width: 1400px) {
  .text-readable {
    max-width: 75ch;
    line-height: 1.7 !important;
  }
}

/* ДОПОЛНИТЕЛЬНЫЕ КЛАССЫ ДЛЯ УЛУЧШЕННОЙ ТИПОГРАФИКИ */

/* Крупный текст для важных сообщений */
.text-lead {
  font-family: "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
  font-size: clamp(1.125rem, 1.5vw, 1.25rem) !important; /* 18px-20px */
  line-height: 1.7 !important;
  font-weight: 500 !important;
  letter-spacing: 0.005em !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
  max-width: 65ch;
}

@media (prefers-color-scheme: dark) {
  .text-lead { color: #D1D5DB !important; }
}

/* Мелкий текст для подписей */
.text-small {
  font-family: "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
  font-size: clamp(0.75rem, 0.8vw, 0.875rem) !important; /* 12px-14px */
  line-height: 1.6 !important;
  font-weight: 400 !important;
  letter-spacing: 0.01em !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .text-small { color: #9CA3AF !important; }
}

/* Выделенный текст */
.text-emphasis {
  font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
  font-size: clamp(1rem, 1.2vw, 1.125rem) !important;
  line-height: 1.5 !important;
  font-weight: 600 !important;
  letter-spacing: -0.005em !important;
  color: #111827 !important;
}

@media (prefers-color-scheme: dark) {
  .text-emphasis { color: #F3F4F6 !important; }
}

/* Код и моноширинный текст */
.text-code {
  font-family: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace !important;
  font-size: clamp(0.8rem, 0.9vw, 0.875rem) !important;
  line-height: 1.5 !important;
  font-weight: 400 !important;
  letter-spacing: 0.01em !important;
  background-color: #F3F4F6 !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
  padding: 0.125rem 0.25rem !important;
  border-radius: 0.25rem !important;
}

@media (prefers-color-scheme: dark) {
  .text-code { 
    background-color: #374151 !important;
    color: #D1D5DB !important;
  }
}

/* КНИЖНЫЕ КЛАССЫ С SF PRO И ПРАВИЛЬНЫМИ ПРОПОРЦИЯМИ */

/* Описания книг - максимальная читаемость */
.book-description {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.875rem, 1.1vw, 1rem) !important; /* 14px-16px */
  line-height: 1.75 !important;
  font-weight: 400 !important;
  letter-spacing: 0.008em !important;
  text-rendering: optimizeLegibility !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  max-width: 68ch; /* Оптимальная длина строки для чтения */
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .book-description { color: #D1D5DB !important; }
}

/* Названия книг в карточках */
.book-title {
  font-family: "SF Pro Display", -apple-system, sans-serif !important;
  font-size: clamp(0.875rem, 1.5vw, 1rem) !important; /* 14px-16px */
  line-height: 1.4 !important;
  font-weight: 600 !important;
  letter-spacing: -0.005em !important;
  text-rendering: optimizeLegibility !important;
  color: #111827 !important;
}

@media (prefers-color-scheme: dark) {
  .book-title { color: #F9FAFB !important; }
}

/* Имена авторов */
.book-author {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.75rem, 0.9vw, 0.875rem) !important; /* 12px-14px */
  line-height: 1.5 !important;
  font-weight: 500 !important;
  letter-spacing: 0.01em !important;
  text-rendering: optimizeLegibility !important;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .book-author { color: #9CA3AF !important; }
}

/* Цены и важная информация с поддержкой тем */
.highlight-text {
  font-family: "SF Pro Display", -apple-system, sans-serif !important;
  font-size: clamp(0.875rem, 1.2vw, 1rem) !important; /* 14px-16px */
  line-height: 1.4 !important;
  font-weight: 600 !important;
  letter-spacing: 0.005em !important;
  text-rendering: optimizeLegibility !important;
  color: #1F2937 !important;
}

@media (prefers-color-scheme: dark) {
  .highlight-text { color: #F3F4F6 !important; }
}

/* Статусы книг (Доступна/Занята) с поддержкой тем */
.status-text {
  font-family: "SF Pro Text", -apple-system, sans-serif !important;
  font-size: clamp(0.7rem, 0.8vw, 0.75rem) !important; /* 11.2px-12px */
  line-height: 1.3 !important;
  font-weight: 600 !important;
  letter-spacing: 0.04em !important;
  text-rendering: optimizeLegibility !important;
  text-transform: uppercase;
  color: #212121 !important; /* Оптимальный контраст для белого фона */
}

@media (prefers-color-scheme: dark) {
  .status-text { color: #D1D5DB !important; }
}

/* Адаптивность для планшетов */
@media (min-width: 768px) and (max-width: 1024px) {
  .book-description {
    font-size: 1.0625rem !important; /* 17px */
    line-height: 1.75 !important;
  }
  
  .book-title {
    font-size: 1.25rem !important; /* 20px */
  }
}

/* Система размеров шрифтов на rem-единицах */
@layer utilities {
  
  /* Основной текст */
  .text-body-lg {
    font-size: 1.125rem;  /* 18px на десктопе */
    line-height: 1.7;
    font-weight: 400;
  }
  
  .text-body {
    font-size: 1rem;      /* 16px на десктопе */
    line-height: 1.6;
    font-weight: 400;
  }
  
  .text-body-sm {
    font-size: 0.875rem;  /* 14px на десктопе */
    line-height: 1.6;
    font-weight: 400;
  }
  
  /* Вспомогательный текст */
  .text-caption {
    font-size: 0.75rem;   /* 12px на десктопе */
    line-height: 1.5;
    font-weight: 500;
    letter-spacing: 0.025em;
  }
  
  .text-overline {
    font-size: 0.75rem;   /* 12px на десктопе */
    line-height: 1.5;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }
  
  /* Специальные стили для лучшей читаемости */
  .text-readable {
    font-size: 1.0625rem; /* 17px на десктопе */
    line-height: 1.7;
    font-weight: 400;
  }
}

/* Адаптивные модификаторы для мобильных устройств */
@media (max-width: 639px) {
  .text-display {
    font-size: 2.75rem;   /* 38.5px на мобильных (14px база) */
    line-height: 1.05;
  }
  
  .text-h1 {
    font-size: 2.25rem;   /* 31.5px на мобильных */
    line-height: 1.1;
  }
  
  .text-h2 {
    font-size: 1.875rem;  /* 26.25px на мобильных */
    line-height: 1.15;
  }
  
  .text-h3 {
    font-size: 1.5rem;    /* 21px на мобильных */
    line-height: 1.25;
  }
  
  .text-h4 {
    font-size: 1.25rem;   /* 17.5px на мобильных */
    line-height: 1.35;
  }
  
  .text-h5 {
    font-size: 1.125rem;  /* 15.75px на мобильных */
    line-height: 1.4;
  }
  
  .text-h6 {
    font-size: 1rem;      /* 14px на мобильных */
    line-height: 1.45;
  }
}

/* Утилиты для улучшения читаемости */
@layer utilities {
  .font-smooth {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  .text-balance {
    text-wrap: balance;
  }
  
  .text-pretty {
    text-wrap: pretty;
  }
  
  /* ИНЬ И ЯН: АБСОЛЮТНОЕ ПРАВИЛО КОНТРАСТА */
  /* ТЕМНЫЙ ФОН = БЕЛЫЙ ТЕКСТ - МАКСИМАЛЬНЫЙ ПРИОРИТЕТ */
  .bg-gray-900,
  .bg-gray-900 *,
  .bg-gray-800,
  .bg-gray-800 *,
  .bg-slate-900,
  .bg-slate-900 *,
  .bg-slate-800,
  .bg-slate-800 * {
    color: white !important;
  }
  
  /* Специально для всех типографических классов на темном фоне */
  .bg-gray-900 .text-display,
  .bg-gray-900 .text-h1,
  .bg-gray-900 .text-h2,
  .bg-gray-900 .text-h3,
  .bg-gray-900 .text-h4,
  .bg-gray-900 .text-h5,
  .bg-gray-900 .text-h6,
  .bg-gray-900 .text-readable,
  .bg-gray-900 .text-body,
  .bg-gray-900 .text-body-sm,
  .bg-gray-900 .text-caption,
  .bg-gray-800 .text-display,
  .bg-gray-800 .text-h1,
  .bg-gray-800 .text-h2,
  .bg-gray-800 .text-h3,
  .bg-gray-800 .text-h4,
  .bg-gray-800 .text-h5,
  .bg-gray-800 .text-h6,
  .bg-gray-800 .text-readable,
  .bg-gray-800 .text-body,
  .bg-gray-800 .text-body-sm,
  .bg-gray-800 .text-caption {
    color: white !important;
  }
  
  /* СВЕТЛЫЙ ФОН = ТЕМНЫЙ ТЕКСТ */
  .bg-white .text-display,
  .bg-white .text-h1,
  .bg-white .text-h2,
  .bg-white .text-h3,
  .bg-white .text-h4,
  .bg-white .text-h5,
  .bg-white .text-h6,
  .bg-gray-50 .text-display,
  .bg-gray-50 .text-h1,
  .bg-gray-50 .text-h2,
  .bg-gray-50 .text-h3,
  .bg-gray-50 .text-h4,
  .bg-gray-50 .text-h5,
  .bg-gray-50 .text-h6 {
    color: #1f2937 !important;
  }
  
  /* СУПЕРПРИОРИТЕТ: Если ничего не помогает, принудительно белый на темном */
  section.bg-gray-900 h2,
  section.bg-gray-900 .text-h2,
  div.bg-gray-900 h2,
  div.bg-gray-900 .text-h2 {
    color: white !important;
  }
  
  /* Адаптивная высота строки */
  .leading-tight { line-height: 1.25; }
  .leading-snug { line-height: 1.375; }
  .leading-normal { line-height: 1.5; }
  .leading-relaxed { line-height: 1.625; }
  .leading-loose { line-height: 2; }
}

/* ФИНАЛЬНЫЕ ПРАВИЛА КОНТРАСТА - МАКСИМАЛЬНЫЙ ПРИОРИТЕТ В КОНЦЕ ФАЙЛА */
.bg-gray-900 *,
.bg-gray-800 * {
  color: white !important;
}

/* Убиваем любые исключения для цветов на темном фоне */
.bg-gray-900 h1, .bg-gray-900 h2, .bg-gray-900 h3, .bg-gray-900 h4, .bg-gray-900 h5, .bg-gray-900 h6,
.bg-gray-900 .text-display, .bg-gray-900 .text-h1, .bg-gray-900 .text-h2, 
.bg-gray-900 .text-h3, .bg-gray-900 .text-h4, .bg-gray-900 .text-h5, .bg-gray-900 .text-h6,
.bg-gray-900 p, .bg-gray-900 span, .bg-gray-900 div, .bg-gray-900 .text-readable {
  color: white !important;
}
